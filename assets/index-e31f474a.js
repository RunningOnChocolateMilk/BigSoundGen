import{r as z,a as E1,R as R1}from"./vendor-b1791c80.js";import{L as M1,T as pe,O as je,s as le,P as N1,S as T1,F as B1,R as C1,a as k1,b as j1,c as I1,E as g1,C as F1,G as O1,d as L1,e as H1,f as se}from"./tone-42407d74.js";(function(){const T=document.createElement("link").relList;if(T&&T.supports&&T.supports("modulepreload"))return;for(const L of document.querySelectorAll('link[rel="modulepreload"]'))j(L);new MutationObserver(L=>{for(const V of L)if(V.type==="childList")for(const Y of V.addedNodes)Y.tagName==="LINK"&&Y.rel==="modulepreload"&&j(Y)}).observe(document,{childList:!0,subtree:!0});function C(L){const V={};return L.integrity&&(V.integrity=L.integrity),L.referrerPolicy&&(V.referrerPolicy=L.referrerPolicy),L.crossOrigin==="use-credentials"?V.credentials="include":L.crossOrigin==="anonymous"?V.credentials="omit":V.credentials="same-origin",V}function j(L){if(L.ep)return;L.ep=!0;const V=C(L);fetch(L.href,V)}})();var r1={exports:{}},Te={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=z,V1=Symbol.for("react.element"),G1=Symbol.for("react.fragment"),$1=Object.prototype.hasOwnProperty,D1=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function s1(d,T,C){var j,L={},V=null,Y=null;C!==void 0&&(V=""+C),T.key!==void 0&&(V=""+T.key),T.ref!==void 0&&(Y=T.ref);for(j in T)$1.call(T,j)&&!U1.hasOwnProperty(j)&&(L[j]=T[j]);if(d&&d.defaultProps)for(j in T=d.defaultProps,T)L[j]===void 0&&(L[j]=T[j]);return{$$typeof:V1,type:d,key:V,ref:Y,props:L,_owner:D1.current}}Te.Fragment=G1;Te.jsx=s1;Te.jsxs=s1;r1.exports=Te;var h=r1.exports,$e={},ze=E1;$e.createRoot=ze.createRoot,$e.hydrateRoot=ze.hydrateRoot;function Y1(d){return new Int8Array(d)}function l1(d){return new Int16Array(d)}function i1(d){return new Int32Array(d)}function o1(d){return new Float32Array(d)}function q1(d){return new Float64Array(d)}function c1(d){if(d.length==1)return o1(d[0]);var T=d[0];d=d.slice(1);for(var C=[],j=0;j<T;j++)C.push(c1(d));return C}function _1(d){if(d.length==1)return i1(d[0]);var T=d[0];d=d.slice(1);for(var C=[],j=0;j<T;j++)C.push(_1(d));return C}function d1(d){if(d.length==1)return l1(d[0]);var T=d[0];d=d.slice(1);for(var C=[],j=0;j<T;j++)C.push(d1(d));return C}function f1(d){if(d.length==1)return new Array(d[0]);var T=d[0];d=d.slice(1);for(var C=[],j=0;j<T;j++)C.push(f1(d));return C}var h1={};h1.fill=function(d,T,C,j){if(arguments.length==2)for(var L=0;L<d.length;L++)d[L]=arguments[1];else for(var L=T;L<C;L++)d[L]=j};var oe={};oe.arraycopy=function(d,T,C,j,L){for(var V=T+L;T<V;)C[j++]=d[T++]};oe.out={};oe.out.println=function(d){console.log(d)};oe.out.printf=function(){console.log.apply(console,arguments)};var Be={};Be.SQRT2=1.4142135623730951;Be.FAST_LOG10=function(d){return Math.log10(d)};Be.FAST_LOG10_X=function(d,T){return Math.log10(d)*T};function q0(d){this.ordinal=d}q0.short_block_allowed=new q0(0);q0.short_block_coupled=new q0(1);q0.short_block_dispensed=new q0(2);q0.short_block_forced=new q0(3);var v1={};v1.MAX_VALUE=34028235e31;function O0(d){this.ordinal=d}O0.vbr_off=new O0(0);O0.vbr_mt=new O0(1);O0.vbr_rh=new O0(2);O0.vbr_abr=new O0(3);O0.vbr_mtrh=new O0(4);O0.vbr_default=O0.vbr_mtrh;var z1=function(d){},n0={System:oe,VbrMode:O0,Float:v1,ShortBlock:q0,Util:Be,Arrays:h1,new_array_n:f1,new_byte:Y1,new_double:q1,new_float:o1,new_float_n:c1,new_int:i1,new_int_n:_1,new_short:l1,new_short_n:d1,assert:z1},Ie,We;function W1(){if(We)return Ie;We=1;var d=n0,T=d.System;d.VbrMode,d.Float,d.ShortBlock;var C=d.Util,j=d.Arrays;d.new_array_n,d.new_byte,d.new_double;var L=d.new_float;d.new_float_n,d.new_int,d.new_int_n,d.assert;var V=d0();function Y(){var I=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*C.SQRT2*.5/2384e-9,.017876148*C.SQRT2*.5/2384e-9,.003134727*C.SQRT2*.5/2384e-9,.002457142*C.SQRT2*.5/2384e-9,971317e-9*C.SQRT2*.5/2384e-9,218868e-9*C.SQRT2*.5/2384e-9,101566e-9*C.SQRT2*.5/2384e-9,13828e-9*C.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],k=12,H=36,X=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],p=X[V.SHORT_TYPE],E=X[V.SHORT_TYPE],F=X[V.SHORT_TYPE],G=X[V.SHORT_TYPE],M=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function O(u,x,e){for(var f=10,v=x+238-14-286,b=-15;b<0;b++){var o,r,a;o=I[f+-10],r=u[v+-224]*o,a=u[x+224]*o,o=I[f+-9],r+=u[v+-160]*o,a+=u[x+160]*o,o=I[f+-8],r+=u[v+-96]*o,a+=u[x+96]*o,o=I[f+-7],r+=u[v+-32]*o,a+=u[x+32]*o,o=I[f+-6],r+=u[v+32]*o,a+=u[x+-32]*o,o=I[f+-5],r+=u[v+96]*o,a+=u[x+-96]*o,o=I[f+-4],r+=u[v+160]*o,a+=u[x+-160]*o,o=I[f+-3],r+=u[v+224]*o,a+=u[x+-224]*o,o=I[f+-2],r+=u[x+-256]*o,a-=u[v+256]*o,o=I[f+-1],r+=u[x+-192]*o,a-=u[v+192]*o,o=I[f+0],r+=u[x+-128]*o,a-=u[v+128]*o,o=I[f+1],r+=u[x+-64]*o,a-=u[v+64]*o,o=I[f+2],r+=u[x+0]*o,a-=u[v+0]*o,o=I[f+3],r+=u[x+64]*o,a-=u[v+-64]*o,o=I[f+4],r+=u[x+128]*o,a-=u[v+-128]*o,o=I[f+5],r+=u[x+192]*o,a-=u[v+-192]*o,r*=I[f+6],o=a-r,e[30+b*2]=a+r,e[31+b*2]=I[f+7]*o,f+=18,x--,v++}{var r,a,l,n;a=u[x+-16]*I[f+-10],r=u[x+-32]*I[f+-2],a+=(u[x+-48]-u[x+16])*I[f+-9],r+=u[x+-96]*I[f+-1],a+=(u[x+-80]+u[x+48])*I[f+-8],r+=u[x+-160]*I[f+0],a+=(u[x+-112]-u[x+80])*I[f+-7],r+=u[x+-224]*I[f+1],a+=(u[x+-144]+u[x+112])*I[f+-6],r-=u[x+32]*I[f+2],a+=(u[x+-176]-u[x+144])*I[f+-5],r-=u[x+96]*I[f+3],a+=(u[x+-208]+u[x+176])*I[f+-4],r-=u[x+160]*I[f+4],a+=(u[x+-240]-u[x+208])*I[f+-3],r-=u[x+224],l=r-a,n=r+a,a=e[14],r=e[15]-a,e[31]=n+a,e[30]=l+r,e[15]=l-r,e[14]=n-a}{var t;t=e[28]-e[0],e[0]+=e[28],e[28]=t*I[f+-2*18+7],t=e[29]-e[1],e[1]+=e[29],e[29]=t*I[f+-2*18+7],t=e[26]-e[2],e[2]+=e[26],e[26]=t*I[f+-4*18+7],t=e[27]-e[3],e[3]+=e[27],e[27]=t*I[f+-4*18+7],t=e[24]-e[4],e[4]+=e[24],e[24]=t*I[f+-6*18+7],t=e[25]-e[5],e[5]+=e[25],e[25]=t*I[f+-6*18+7],t=e[22]-e[6],e[6]+=e[22],e[22]=t*C.SQRT2,t=e[23]-e[7],e[7]+=e[23],e[23]=t*C.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],t=e[6],e[6]=e[31]-t,e[31]=e[31]+t,t=e[7],e[7]=e[30]-t,e[30]=e[30]+t,t=e[22],e[22]=e[15]-t,e[15]=e[15]+t,t=e[23],e[23]=e[14]-t,e[14]=e[14]+t,t=e[20]-e[8],e[8]+=e[20],e[20]=t*I[f+-10*18+7],t=e[21]-e[9],e[9]+=e[21],e[21]=t*I[f+-10*18+7],t=e[18]-e[10],e[10]+=e[18],e[18]=t*I[f+-12*18+7],t=e[19]-e[11],e[11]+=e[19],e[19]=t*I[f+-12*18+7],t=e[16]-e[12],e[12]+=e[16],e[16]=t*I[f+-14*18+7],t=e[17]-e[13],e[13]+=e[17],e[17]=t*I[f+-14*18+7],t=-e[20]+e[24],e[20]+=e[24],e[24]=t*I[f+-12*18+7],t=-e[21]+e[25],e[21]+=e[25],e[25]=t*I[f+-12*18+7],t=e[4]-e[8],e[4]+=e[8],e[8]=t*I[f+-12*18+7],t=e[5]-e[9],e[5]+=e[9],e[9]=t*I[f+-12*18+7],t=e[0]-e[12],e[0]+=e[12],e[12]=t*I[f+-4*18+7],t=e[1]-e[13],e[1]+=e[13],e[13]=t*I[f+-4*18+7],t=e[16]-e[28],e[16]+=e[28],e[28]=t*I[f+-4*18+7],t=-e[17]+e[29],e[17]+=e[29],e[29]=t*I[f+-4*18+7],t=C.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=t,t=C.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=t,t=C.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=t-e[18],t=C.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=t-e[19],t=e[2],e[19]-=e[3],e[3]-=t,e[2]=e[31]-t,e[31]+=t,t=e[3],e[11]-=e[19],e[18]-=t,e[3]=e[30]-t,e[30]+=t,t=e[18],e[27]-=e[11],e[19]-=t,e[18]=e[15]-t,e[15]+=t,t=e[19],e[10]-=t,e[19]=e[14]-t,e[14]+=t,t=e[10],e[11]-=t,e[10]=e[23]-t,e[23]+=t,t=e[11],e[26]-=t,e[11]=e[22]-t,e[22]+=t,t=e[26],e[27]-=t,e[26]=e[7]-t,e[7]+=t,t=e[27],e[27]=e[6]-t,e[6]+=t,t=C.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=t,t=C.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=t,t=C.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=t,t=C.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=t,t=-C.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=t-e[8],t=-C.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=t-e[9],t=-C.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=t-e[25],t=-C.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=t-e[24],t=e[24]-e[16],e[24]=t,t=e[20]-t,e[20]=t,t=e[28]-t,e[28]=t,t=e[25]-e[17],e[25]=t,t=e[21]-t,e[21]=t,t=e[29]-t,e[29]=t,t=e[17]-e[1],e[17]=t,t=e[9]-t,e[9]=t,t=e[25]-t,e[25]=t,t=e[5]-t,e[5]=t,t=e[21]-t,e[21]=t,t=e[13]-t,e[13]=t,t=e[29]-t,e[29]=t,t=e[1]-e[0],e[1]=t,t=e[16]-t,e[16]=t,t=e[17]-t,e[17]=t,t=e[8]-t,e[8]=t,t=e[9]-t,e[9]=t,t=e[24]-t,e[24]=t,t=e[25]-t,e[25]=t,t=e[4]-t,e[4]=t,t=e[5]-t,e[5]=t,t=e[20]-t,e[20]=t,t=e[21]-t,e[21]=t,t=e[12]-t,e[12]=t,t=e[13]-t,e[13]=t,t=e[28]-t,e[28]=t,t=e[29]-t,e[29]=t,t=e[0],e[0]+=e[31],e[31]-=t,t=e[1],e[1]+=e[30],e[30]-=t,t=e[16],e[16]+=e[15],e[15]-=t,t=e[17],e[17]+=e[14],e[14]-=t,t=e[8],e[8]+=e[23],e[23]-=t,t=e[9],e[9]+=e[22],e[22]-=t,t=e[24],e[24]+=e[7],e[7]-=t,t=e[25],e[25]+=e[6],e[6]-=t,t=e[4],e[4]+=e[27],e[27]-=t,t=e[5],e[5]+=e[26],e[26]-=t,t=e[20],e[20]+=e[11],e[11]-=t,t=e[21],e[21]+=e[10],e[10]-=t,t=e[12],e[12]+=e[19],e[19]-=t,t=e[13],e[13]+=e[18],e[18]-=t,t=e[28],e[28]+=e[3],e[3]-=t,t=e[29],e[29]+=e[2],e[2]-=t}}function _0(u,x){for(var e=0;e<3;e++){var f,v,b,o,r,a;o=u[x+2*3]*X[V.SHORT_TYPE][0]-u[x+5*3],f=u[x+0*3]*X[V.SHORT_TYPE][2]-u[x+3*3],v=o+f,b=o-f,o=u[x+5*3]*X[V.SHORT_TYPE][0]+u[x+2*3],f=u[x+3*3]*X[V.SHORT_TYPE][2]+u[x+0*3],r=o+f,a=-o+f,f=(u[x+1*3]*X[V.SHORT_TYPE][1]-u[x+4*3])*2069978111953089e-26,o=(u[x+4*3]*X[V.SHORT_TYPE][1]+u[x+1*3])*2069978111953089e-26,u[x+3*0]=v*190752519173728e-25+f,u[x+3*5]=-r*190752519173728e-25+o,b=b*.8660254037844387*1907525191737281e-26,r=r*.5*1907525191737281e-26+o,u[x+3*1]=b-r,u[x+3*2]=b+r,v=v*.5*1907525191737281e-26-f,a=a*.8660254037844387*1907525191737281e-26,u[x+3*3]=v+a,u[x+3*4]=v-a,x++}}function w(u,x,e){var f,v;{var b,o,r,a,l,n,t,i;b=e[17]-e[9],r=e[15]-e[11],a=e[14]-e[12],l=e[0]+e[8],n=e[1]+e[7],t=e[2]+e[6],i=e[3]+e[5],u[x+17]=l+t-i-(n-e[4]),v=(l+t-i)*E[12+7]+(n-e[4]),f=(b-r-a)*E[12+6],u[x+5]=f+v,u[x+6]=f-v,o=(e[16]-e[10])*E[12+6],n=n*E[12+7]+e[4],f=b*E[12+0]+o+r*E[12+1]+a*E[12+2],v=-l*E[12+4]+n-t*E[12+5]+i*E[12+3],u[x+1]=f+v,u[x+2]=f-v,f=b*E[12+1]-o-r*E[12+2]+a*E[12+0],v=-l*E[12+5]+n-t*E[12+3]+i*E[12+4],u[x+9]=f+v,u[x+10]=f-v,f=b*E[12+2]-o+r*E[12+0]-a*E[12+1],v=l*E[12+3]-n+t*E[12+4]-i*E[12+5],u[x+13]=f+v,u[x+14]=f-v}{var s,m,c,_,A,N,y,S;s=e[8]-e[0],c=e[6]-e[2],_=e[5]-e[3],A=e[17]+e[9],N=e[16]+e[10],y=e[15]+e[11],S=e[14]+e[12],u[x+0]=A+y+S+(N+e[13]),f=(A+y+S)*E[12+7]-(N+e[13]),v=(s-c+_)*E[12+6],u[x+11]=f+v,u[x+12]=f-v,m=(e[7]-e[1])*E[12+6],N=e[13]-N*E[12+7],f=A*E[12+3]-N+y*E[12+4]+S*E[12+5],v=s*E[12+2]+m+c*E[12+0]+_*E[12+1],u[x+3]=f+v,u[x+4]=f-v,f=-A*E[12+5]+N-y*E[12+3]-S*E[12+4],v=s*E[12+1]+m-c*E[12+2]-_*E[12+0],u[x+7]=f+v,u[x+8]=f-v,f=-A*E[12+4]+N-y*E[12+5]-S*E[12+3],v=s*E[12+0]-m+c*E[12+1]-_*E[12+2],u[x+15]=f+v,u[x+16]=f-v}}this.mdct_sub48=function(u,x,e){for(var f=x,v=286,b=0;b<u.channels_out;b++){for(var o=0;o<u.mode_gr;o++){for(var r,a=u.l3_side.tt[o][b],l=a.xr,n=0,t=u.sb_sample[b][1-o],i=0,s=0;s<18/2;s++)for(O(f,v,t[i]),O(f,v+32,t[i+1]),i+=2,v+=64,r=1;r<32;r+=2)t[i-1][r]*=-1;for(r=0;r<32;r++,n+=18){var m=a.block_type,c=u.sb_sample[b][o],_=u.sb_sample[b][1-o];if(a.mixed_block_flag!=0&&r<2&&(m=0),u.amp_filter[r]<1e-12)j.fill(l,n+0,n+18,0);else{if(u.amp_filter[r]<1)for(var s=0;s<18;s++)_[s][M[r]]*=u.amp_filter[r];if(m==V.SHORT_TYPE){for(var s=-k/4;s<0;s++){var A=X[V.SHORT_TYPE][s+3];l[n+s*3+9]=c[9+s][M[r]]*A-c[8-s][M[r]],l[n+s*3+18]=c[14-s][M[r]]*A+c[15+s][M[r]],l[n+s*3+10]=c[15+s][M[r]]*A-c[14-s][M[r]],l[n+s*3+19]=_[2-s][M[r]]*A+_[3+s][M[r]],l[n+s*3+11]=_[3+s][M[r]]*A-_[2-s][M[r]],l[n+s*3+20]=_[8-s][M[r]]*A+_[9+s][M[r]]}_0(l,n)}else{for(var N=L(18),s=-H/4;s<0;s++){var y,S;y=X[m][s+27]*_[s+9][M[r]]+X[m][s+36]*_[8-s][M[r]],S=X[m][s+9]*c[s+9][M[r]]-X[m][s+18]*c[8-s][M[r]],N[s+9]=y-S*p[3+s+9],N[s+18]=y*p[3+s+9]+S}w(l,n,N)}}if(m!=V.SHORT_TYPE&&r!=0)for(var s=7;s>=0;--s){var $,q;$=l[n+s]*F[20+s]+l[n+-1-s]*G[28+s],q=l[n+s]*G[28+s]-l[n+-1-s]*F[20+s],l[n+-1-s]=$,l[n+s]=q}}}if(f=e,v=286,u.mode_gr==1)for(var Q=0;Q<18;Q++)T.arraycopy(u.sb_sample[b][1][Q],0,u.sb_sample[b][0][Q],0,32)}}}return Ie=Y,Ie}var ge,Qe;function m1(){if(Qe)return ge;Qe=1;var d=d0(),T=n0,C=T.System;T.VbrMode,T.Float,T.ShortBlock,T.Util,T.Arrays,T.new_array_n,T.new_byte,T.new_double;var j=T.new_float,L=T.new_float_n;T.new_int,T.new_int_n,T.assert;function V(){this.l=j(d.SBMAX_l),this.s=L([d.SBMAX_s,3]);var Y=this;this.assign=function(I){C.arraycopy(I.l,0,Y.l,0,d.SBMAX_l);for(var k=0;k<d.SBMAX_s;k++)for(var H=0;H<3;H++)Y.s[k][H]=I.s[k][H]}}return ge=V,ge}var Fe,Ke;function Q1(){if(Ke)return Fe;Ke=1;var d=m1();function T(){this.thm=new d,this.en=new d}return Fe=T,Fe}var Oe,Pe;function d0(){if(Pe)return Oe;Pe=1;var d=n0,T=d.System,C=d.VbrMode;d.Float,d.ShortBlock,d.Util,d.Arrays;var j=d.new_array_n;d.new_byte,d.new_double;var L=d.new_float,V=d.new_float_n,Y=d.new_int;d.new_int_n;var I=d.assert;k.ENCDELAY=576,k.POSTDELAY=1152,k.MDCTDELAY=48,k.FFTOFFSET=224+k.MDCTDELAY,k.DECDELAY=528,k.SBLIMIT=32,k.CBANDS=64,k.SBPSY_l=21,k.SBPSY_s=12,k.SBMAX_l=22,k.SBMAX_s=13,k.PSFB21=6,k.PSFB12=6,k.BLKSIZE=1024,k.HBLKSIZE=k.BLKSIZE/2+1,k.BLKSIZE_s=256,k.HBLKSIZE_s=k.BLKSIZE_s/2+1,k.NORM_TYPE=0,k.START_TYPE=1,k.SHORT_TYPE=2,k.STOP_TYPE=3,k.MPG_MD_LR_LR=0,k.MPG_MD_LR_I=1,k.MPG_MD_MS_LR=2,k.MPG_MD_MS_I=3,k.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function k(){var H=W1(),X=Q1(),p=k.FFTOFFSET,E=k.MPG_MD_MS_LR,F=null;this.psy=null;var G=null,M=null,O=null;this.setModules=function(e,f,v,b){F=e,this.psy=f,G=f,M=b,O=v};var _0=new H;function w(e){var f,v;if(e.ATH.useAdjust==0){e.ATH.adjust=1;return}if(v=e.loudness_sq[0][0],f=e.loudness_sq[1][0],e.channels_out==2?(v+=e.loudness_sq[0][1],f+=e.loudness_sq[1][1]):(v+=v,f+=f),e.mode_gr==2&&(v=Math.max(v,f)),v*=.5,v*=e.ATH.aaSensitivityP,v>.03125)e.ATH.adjust>=1?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1;else{var b=31.98*v+625e-6;e.ATH.adjust>=b?(e.ATH.adjust*=b*.075+.925,e.ATH.adjust<b&&(e.ATH.adjust=b)):e.ATH.adjustLimit>=b?e.ATH.adjust=b:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=b}}function u(e){var f,v;for(I(0<=e.bitrate_index&&e.bitrate_index<16),I(0<=e.mode_ext&&e.mode_ext<4),e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,e.channels_out==2&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),f=0;f<e.mode_gr;++f)for(v=0;v<e.channels_out;++v){var b=e.l3_side.tt[f][v].block_type|0;e.l3_side.tt[f][v].mixed_block_flag!=0&&(b=4),e.bitrate_blockType_Hist[e.bitrate_index][b]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][b]++,e.bitrate_blockType_Hist[15][5]++}}function x(e,f){var v=e.internal_flags,b,o;if(v.lame_encode_frame_init==0){var r,a,l=L(2014),n=L(286+1152+576);for(v.lame_encode_frame_init=1,r=0,a=0;r<286+576*(1+v.mode_gr);++r)r<576*v.mode_gr?(l[r]=0,v.channels_out==2&&(n[r]=0)):(l[r]=f[0][a],v.channels_out==2&&(n[r]=f[1][a]),++a);for(o=0;o<v.mode_gr;o++)for(b=0;b<v.channels_out;b++)v.l3_side.tt[o][b].block_type=k.SHORT_TYPE;_0.mdct_sub48(v,l,n),I(576>=k.FFTOFFSET),I(v.mf_size>=k.BLKSIZE+e.framesize-k.FFTOFFSET),I(v.mf_size>=512+e.framesize-32)}}this.lame_encode_mp3_frame=function(e,f,v,b,o,r){var a,l=j([2,2]);l[0][0]=new X,l[0][1]=new X,l[1][0]=new X,l[1][1]=new X;var n=j([2,2]);n[0][0]=new X,n[0][1]=new X,n[1][0]=new X,n[1][1]=new X;var t,i=[null,null],s=e.internal_flags,m=V([2,4]),c=[.5,.5],_=[[0,0],[0,0]],A=[[0,0],[0,0]],N,y,S;if(i[0]=f,i[1]=v,s.lame_encode_frame_init==0&&x(e,i),s.padding=0,(s.slot_lag-=s.frac_SpF)<0&&(s.slot_lag+=e.out_samplerate,s.padding=1),s.psymodel!=0){var $,q=[null,null],Q=0,K=Y(2);for(S=0;S<s.mode_gr;S++){for(y=0;y<s.channels_out;y++)q[y]=i[y],Q=576+S*576-k.FFTOFFSET;if(e.VBR==C.vbr_mtrh||e.VBR==C.vbr_mt?$=G.L3psycho_anal_vbr(e,q,Q,S,l,n,_[S],A[S],m[S],K):$=G.L3psycho_anal_ns(e,q,Q,S,l,n,_[S],A[S],m[S],K),$!=0)return-4;for(e.mode==MPEGMode.JOINT_STEREO&&(c[S]=m[S][2]+m[S][3],c[S]>0&&(c[S]=m[S][3]/c[S])),y=0;y<s.channels_out;y++){var i0=s.l3_side.tt[S][y];i0.block_type=K[y],i0.mixed_block_flag=0}}}else for(S=0;S<s.mode_gr;S++)for(y=0;y<s.channels_out;y++)s.l3_side.tt[S][y].block_type=k.NORM_TYPE,s.l3_side.tt[S][y].mixed_block_flag=0,A[S][y]=_[S][y]=700;if(w(s),_0.mdct_sub48(s,i[0],i[1]),s.mode_ext=k.MPG_MD_LR_LR,e.force_ms)s.mode_ext=k.MPG_MD_MS_LR;else if(e.mode==MPEGMode.JOINT_STEREO){var Z=0,f0=0;for(S=0;S<s.mode_gr;S++)for(y=0;y<s.channels_out;y++)Z+=A[S][y],f0+=_[S][y];if(Z<=1*f0){var z0=s.l3_side.tt[0],W0=s.l3_side.tt[s.mode_gr-1];z0[0].block_type==z0[1].block_type&&W0[0].block_type==W0[1].block_type&&(s.mode_ext=k.MPG_MD_MS_LR)}}if(s.mode_ext==E?(t=n,N=A):(t=l,N=_),e.analysis&&s.pinfo!=null)for(S=0;S<s.mode_gr;S++)for(y=0;y<s.channels_out;y++)s.pinfo.ms_ratio[S]=s.ms_ratio[S],s.pinfo.ms_ener_ratio[S]=c[S],s.pinfo.blocktype[S][y]=s.l3_side.tt[S][y].block_type,s.pinfo.pe[S][y]=N[S][y],T.arraycopy(s.l3_side.tt[S][y].xr,0,s.pinfo.xr[S][y],0,576),s.mode_ext==E&&(s.pinfo.ers[S][y]=s.pinfo.ers[S][y+2],T.arraycopy(s.pinfo.energy[S][y+2],0,s.pinfo.energy[S][y],0,s.pinfo.energy[S][y].length));if(e.VBR==C.vbr_off||e.VBR==C.vbr_abr){var J,h0;for(J=0;J<18;J++)s.nsPsy.pefirbuf[J]=s.nsPsy.pefirbuf[J+1];for(h0=0,S=0;S<s.mode_gr;S++)for(y=0;y<s.channels_out;y++)h0+=N[S][y];for(s.nsPsy.pefirbuf[18]=h0,h0=s.nsPsy.pefirbuf[9],J=0;J<9;J++)h0+=(s.nsPsy.pefirbuf[J]+s.nsPsy.pefirbuf[18-J])*k.fircoef[J];for(h0=670*5*s.mode_gr*s.channels_out/h0,S=0;S<s.mode_gr;S++)for(y=0;y<s.channels_out;y++)N[S][y]*=h0}if(s.iteration_loop.iteration_loop(e,N,c,t),F.format_bitstream(e),a=F.copy_buffer(s,b,o,r,1),e.bWriteVbrTag&&M.addVbrFrame(e),e.analysis&&s.pinfo!=null){for(y=0;y<s.channels_out;y++){var o0;for(o0=0;o0<p;o0++)s.pinfo.pcmdata[y][o0]=s.pinfo.pcmdata[y][o0+e.framesize];for(o0=p;o0<1600;o0++)s.pinfo.pcmdata[y][o0]=i[y][o0-p]}O.set_frame_pinfo(e,t)}return u(s),a}}return Oe=k,Oe}var b0=n0;b0.System;b0.VbrMode;b0.Float;b0.ShortBlock;b0.Util;b0.Arrays;b0.new_array_n;b0.new_byte;b0.new_double;b0.new_float;b0.new_float_n;b0.new_int;b0.new_int_n;b0.assert;d0();var x0=n0;x0.System;x0.VbrMode;x0.Float;x0.ShortBlock;x0.Util;x0.Arrays;x0.new_array_n;x0.new_byte;x0.new_double;x0.new_float;x0.new_float_n;x0.new_int;x0.new_int_n;x0.assert;d0();function $0(d){var T=d;this.ordinal=function(){return T}}$0.STEREO=new $0(0);$0.JOINT_STEREO=new $0(1);$0.DUAL_CHANNEL=new $0(2);$0.MONO=new $0(3);$0.NOT_SET=new $0(4);var K1=d0(),u1={};u1.SFBMAX=K1.SBMAX_s*3;var b1=u1,p0=n0;p0.System;p0.VbrMode;p0.Float;p0.ShortBlock;p0.Util;p0.Arrays;p0.new_array_n;p0.new_byte;p0.new_double;var P1=p0.new_float;p0.new_float_n;var Z0=p0.new_int;p0.new_int_n;p0.assert;var Le=b1;function Z1(){this.xr=P1(576),this.l3_enc=Z0(576),this.scalefac=Z0(Le.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Z0(3),this.subblock_gain=Z0(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Z0(Le.SFBMAX),this.window=Z0(Le.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Z0(4),this.max_nonzero_coeff=0;var d=this;function T(j){return new Int32Array(j)}function C(j){return new Float32Array(j)}this.assign=function(j){d.xr=C(j.xr),d.l3_enc=T(j.l3_enc),d.scalefac=T(j.scalefac),d.xrpow_max=j.xrpow_max,d.part2_3_length=j.part2_3_length,d.big_values=j.big_values,d.count1=j.count1,d.global_gain=j.global_gain,d.scalefac_compress=j.scalefac_compress,d.block_type=j.block_type,d.mixed_block_flag=j.mixed_block_flag,d.table_select=T(j.table_select),d.subblock_gain=T(j.subblock_gain),d.region0_count=j.region0_count,d.region1_count=j.region1_count,d.preflag=j.preflag,d.scalefac_scale=j.scalefac_scale,d.count1table_select=j.count1table_select,d.part2_length=j.part2_length,d.sfb_lmax=j.sfb_lmax,d.sfb_smin=j.sfb_smin,d.psy_lmax=j.psy_lmax,d.sfbmax=j.sfbmax,d.psymax=j.psymax,d.sfbdivide=j.sfbdivide,d.width=T(j.width),d.window=T(j.window),d.count1bits=j.count1bits,d.sfb_partition_table=j.sfb_partition_table.slice(0),d.slen=T(j.slen),d.max_nonzero_coeff=j.max_nonzero_coeff}}var x1=Z1,y0=n0;y0.System;y0.VbrMode;y0.Float;y0.ShortBlock;y0.Util;y0.Arrays;y0.new_array_n;y0.new_byte;y0.new_double;y0.new_float;y0.new_float_n;var Ze=y0.new_int;y0.new_int_n;y0.assert;var J1=x1;function et(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Ze(4),Ze(4)];for(var d=0;d<2;d++)for(var T=0;T<2;T++)this.tt[d][T]=new J1}var tt=et,w0=n0,ye=w0.System;w0.VbrMode;w0.Float;w0.ShortBlock;w0.Util;w0.Arrays;w0.new_array_n;w0.new_byte;w0.new_double;w0.new_float;w0.new_float_n;var we=w0.new_int;w0.new_int_n;w0.assert;var Se=d0();function at(d,T,C,j){this.l=we(1+Se.SBMAX_l),this.s=we(1+Se.SBMAX_s),this.psfb21=we(1+Se.PSFB21),this.psfb12=we(1+Se.PSFB12);var L=this.l,V=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],ye.arraycopy(this.arrL,0,L,0,Math.min(this.arrL.length,this.l.length)),ye.arraycopy(this.arrS,0,V,0,Math.min(this.arrS.length,this.s.length)),ye.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),ye.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var p1=at,S0=n0;S0.System;S0.VbrMode;S0.Float;S0.ShortBlock;S0.Util;S0.Arrays;S0.new_array_n;S0.new_byte;S0.new_double;var He=S0.new_float,nt=S0.new_float_n,rt=S0.new_int;S0.new_int_n;S0.assert;var Je=d0();function st(){this.last_en_subshort=nt([4,9]),this.lastAttacks=rt(4),this.pefirbuf=He(19),this.longfact=He(Je.SBMAX_l),this.shortfact=He(Je.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var lt=st;function it(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var ot=it,A0=n0;A0.System;A0.VbrMode;A0.Float;A0.ShortBlock;A0.Util;A0.Arrays;A0.new_array_n;var ct=A0.new_byte,_t=A0.new_double,L0=A0.new_float,J0=A0.new_float_n,X0=A0.new_int,Ae=A0.new_int_n;A0.assert;var dt=tt,ft=p1,ht=lt,vt=ot,e1=m1(),l0=d0(),mt=b1;Y0.MFSIZE=3*1152+l0.ENCDELAY-l0.MDCTDELAY;Y0.MAX_HEADER_BUF=256;Y0.MAX_BITS_PER_CHANNEL=4095;Y0.MAX_BITS_PER_GRANULE=7680;Y0.BPC=320;function Y0(){var d=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=J0([2,Y0.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new dt,this.ms_ratio=L0(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=X0(2),this.CurrentStep=X0(2),this.masking_lower=0,this.bv_scf=X0(576),this.pseudohalf=X0(mt.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Y0.BPC+1),this.itime=_t(2),this.sideinfo_len=0,this.sb_sample=J0([2,2,18,l0.SBLIMIT]),this.amp_filter=L0(32);function T(){this.write_timing=0,this.ptr=0,this.buf=ct(d)}this.header=new Array(Y0.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new ft,this.minval_l=L0(l0.CBANDS),this.minval_s=L0(l0.CBANDS),this.nb_1=J0([4,l0.CBANDS]),this.nb_2=J0([4,l0.CBANDS]),this.nb_s1=J0([4,l0.CBANDS]),this.nb_s2=J0([4,l0.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=L0(4),this.loudness_sq=J0([2,2]),this.loudness_sq_save=L0(2),this.mld_l=L0(l0.SBMAX_l),this.mld_s=L0(l0.SBMAX_s),this.bm_l=X0(l0.SBMAX_l),this.bo_l=X0(l0.SBMAX_l),this.bm_s=X0(l0.SBMAX_s),this.bo_s=X0(l0.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Ae([l0.CBANDS,2]),this.s3ind_s=Ae([l0.CBANDS,2]),this.numlines_s=X0(l0.CBANDS),this.numlines_l=X0(l0.CBANDS),this.rnumlines_l=L0(l0.CBANDS),this.mld_cb_l=L0(l0.CBANDS),this.mld_cb_s=L0(l0.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=L0(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=X0(2),this.nsPsy=new ht,this.VBR_seek_table=new vt,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Ae([16,4+1]),this.bitrate_blockType_Hist=Ae([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var C=0;C<this.en.length;C++)this.en[C]=new e1;for(var C=0;C<this.thm.length;C++)this.thm[C]=new e1;for(var C=0;C<this.header.length;C++)this.header[C]=new T}var y1=Y0,E0=n0;E0.System;E0.VbrMode;E0.Float;E0.ShortBlock;E0.Util;E0.Arrays;E0.new_array_n;E0.new_byte;E0.new_double;E0.new_float;E0.new_float_n;E0.new_int;E0.new_int_n;E0.assert;d0();var R0=n0,u0=R0.System;R0.VbrMode;R0.Float;R0.ShortBlock;R0.Util;var t1=R0.Arrays;R0.new_array_n;R0.new_byte;R0.new_double;R0.new_float;R0.new_float_n;R0.new_int;R0.new_int_n;R0.assert;a0.STEPS_per_dB=100;a0.MAX_dB=120;a0.GAIN_NOT_ENOUGH_SAMPLES=-24601;a0.GAIN_ANALYSIS_ERROR=0;a0.GAIN_ANALYSIS_OK=1;a0.INIT_GAIN_ANALYSIS_ERROR=0;a0.INIT_GAIN_ANALYSIS_OK=1;a0.YULE_ORDER=10;a0.MAX_ORDER=a0.YULE_ORDER;a0.MAX_SAMP_FREQ=48e3;a0.RMS_WINDOW_TIME_NUMERATOR=1;a0.RMS_WINDOW_TIME_DENOMINATOR=20;a0.MAX_SAMPLES_PER_WINDOW=a0.MAX_SAMP_FREQ*a0.RMS_WINDOW_TIME_NUMERATOR/a0.RMS_WINDOW_TIME_DENOMINATOR+1;function a0(){var d=64.82;a0.YULE_ORDER;var T=.95;a0.MAX_SAMP_FREQ;var C=a0.RMS_WINDOW_TIME_NUMERATOR,j=a0.RMS_WINDOW_TIME_DENOMINATOR;a0.MAX_SAMPLES_PER_WINDOW;var L=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],V=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function Y(p,E,F,G,M,O){for(;M--!=0;)F[G]=1e-10+p[E+0]*O[0]-F[G-1]*O[1]+p[E-1]*O[2]-F[G-2]*O[3]+p[E-2]*O[4]-F[G-3]*O[5]+p[E-3]*O[6]-F[G-4]*O[7]+p[E-4]*O[8]-F[G-5]*O[9]+p[E-5]*O[10]-F[G-6]*O[11]+p[E-6]*O[12]-F[G-7]*O[13]+p[E-7]*O[14]-F[G-8]*O[15]+p[E-8]*O[16]-F[G-9]*O[17]+p[E-9]*O[18]-F[G-10]*O[19]+p[E-10]*O[20],++G,++E}function I(p,E,F,G,M,O){for(;M--!=0;)F[G]=p[E+0]*O[0]-F[G-1]*O[1]+p[E-1]*O[2]-F[G-2]*O[3]+p[E-2]*O[4],++G,++E}function k(p,E){for(var F=0;F<MAX_ORDER;F++)p.linprebuf[F]=p.lstepbuf[F]=p.loutbuf[F]=p.rinprebuf[F]=p.rstepbuf[F]=p.routbuf[F]=0;switch(0|E){case 48e3:p.reqindex=0;break;case 44100:p.reqindex=1;break;case 32e3:p.reqindex=2;break;case 24e3:p.reqindex=3;break;case 22050:p.reqindex=4;break;case 16e3:p.reqindex=5;break;case 12e3:p.reqindex=6;break;case 11025:p.reqindex=7;break;case 8e3:p.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return p.sampleWindow=0|(E*C+j-1)/j,p.lsum=0,p.rsum=0,p.totsamp=0,t1.ill(p.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(p,E){return k(p,E)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(p.linpre=MAX_ORDER,p.rinpre=MAX_ORDER,p.lstep=MAX_ORDER,p.rstep=MAX_ORDER,p.lout=MAX_ORDER,p.rout=MAX_ORDER,t1.fill(p.B,0),INIT_GAIN_ANALYSIS_OK)};function H(p){return p*p}this.AnalyzeSamples=function(p,E,F,G,M,O,_0){var w,u,x,e,f,v,b;if(O==0)return GAIN_ANALYSIS_OK;switch(b=0,f=O,_0){case 1:G=E,M=F;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(O<MAX_ORDER?(u0.arraycopy(E,F,p.linprebuf,MAX_ORDER,O),u0.arraycopy(G,M,p.rinprebuf,MAX_ORDER,O)):(u0.arraycopy(E,F,p.linprebuf,MAX_ORDER,MAX_ORDER),u0.arraycopy(G,M,p.rinprebuf,MAX_ORDER,MAX_ORDER));f>0;){v=f>p.sampleWindow-p.totsamp?p.sampleWindow-p.totsamp:f,b<MAX_ORDER?(w=p.linpre+b,u=p.linprebuf,x=p.rinpre+b,e=p.rinprebuf,v>MAX_ORDER-b&&(v=MAX_ORDER-b)):(w=F+b,u=E,x=M+b,e=G),Y(u,w,p.lstepbuf,p.lstep+p.totsamp,v,L[p.reqindex]),Y(e,x,p.rstepbuf,p.rstep+p.totsamp,v,L[p.reqindex]),I(p.lstepbuf,p.lstep+p.totsamp,p.loutbuf,p.lout+p.totsamp,v,V[p.reqindex]),I(p.rstepbuf,p.rstep+p.totsamp,p.routbuf,p.rout+p.totsamp,v,V[p.reqindex]),w=p.lout+p.totsamp,u=p.loutbuf,x=p.rout+p.totsamp,e=p.routbuf;for(var o=v%8;o--!=0;)p.lsum+=H(u[w++]),p.rsum+=H(e[x++]);for(o=v/8;o--!=0;)p.lsum+=H(u[w+0])+H(u[w+1])+H(u[w+2])+H(u[w+3])+H(u[w+4])+H(u[w+5])+H(u[w+6])+H(u[w+7]),w+=8,p.rsum+=H(e[x+0])+H(e[x+1])+H(e[x+2])+H(e[x+3])+H(e[x+4])+H(e[x+5])+H(e[x+6])+H(e[x+7]),x+=8;if(f-=v,b+=v,p.totsamp+=v,p.totsamp==p.sampleWindow){var r=a0.STEPS_per_dB*10*Math.log10((p.lsum+p.rsum)/p.totsamp*.5+1e-37),a=r<=0?0:0|r;a>=p.A.length&&(a=p.A.length-1),p.A[a]++,p.lsum=p.rsum=0,u0.arraycopy(p.loutbuf,p.totsamp,p.loutbuf,0,MAX_ORDER),u0.arraycopy(p.routbuf,p.totsamp,p.routbuf,0,MAX_ORDER),u0.arraycopy(p.lstepbuf,p.totsamp,p.lstepbuf,0,MAX_ORDER),u0.arraycopy(p.rstepbuf,p.totsamp,p.rstepbuf,0,MAX_ORDER),p.totsamp=0}if(p.totsamp>p.sampleWindow)return GAIN_ANALYSIS_ERROR}return O<MAX_ORDER?(u0.arraycopy(p.linprebuf,O,p.linprebuf,0,MAX_ORDER-O),u0.arraycopy(p.rinprebuf,O,p.rinprebuf,0,MAX_ORDER-O),u0.arraycopy(E,F,p.linprebuf,MAX_ORDER-O,O),u0.arraycopy(G,M,p.rinprebuf,MAX_ORDER-O,O)):(u0.arraycopy(E,F+O-MAX_ORDER,p.linprebuf,0,MAX_ORDER),u0.arraycopy(G,M+O-MAX_ORDER,p.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function X(p,E){var F,G=0;for(F=0;F<E;F++)G+=p[F];if(G==0)return GAIN_NOT_ENOUGH_SAMPLES;var M=0|Math.ceil(G*(1-T));for(F=E;F-- >0&&!((M-=p[F])<=0););return d-F/a0.STEPS_per_dB}this.GetTitleGain=function(p){for(var E=X(p.A,p.A.length),F=0;F<p.A.length;F++)p.B[F]+=p.A[F],p.A[F]=0;for(var F=0;F<MAX_ORDER;F++)p.linprebuf[F]=p.lstepbuf[F]=p.loutbuf[F]=p.rinprebuf[F]=p.rstepbuf[F]=p.routbuf[F]=0;return p.totsamp=0,p.lsum=p.rsum=0,E}}var M0=n0;M0.System;M0.VbrMode;M0.Float;M0.ShortBlock;M0.Util;M0.Arrays;M0.new_array_n;M0.new_byte;M0.new_double;M0.new_float;M0.new_float_n;M0.new_int;M0.new_int_n;M0.assert;function ut(d){this.bits=d}var bt=ut,N0=n0;N0.System;N0.VbrMode;N0.Float;N0.ShortBlock;N0.Util;N0.Arrays;N0.new_array_n;N0.new_byte;N0.new_double;N0.new_float;N0.new_float_n;N0.new_int;N0.new_int_n;N0.assert;d0();function W(d,T,C,j){this.xlen=d,this.linmax=T,this.table=C,this.hlen=j}var B={};B.t1HB=[1,1,1,0];B.t2HB=[1,2,1,3,1,1,3,2,0];B.t3HB=[3,2,1,1,1,1,3,2,0];B.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];B.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];B.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];B.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];B.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];B.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];B.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];B.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];B.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];B.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];B.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];B.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];B.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];B.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];B.t1l=[1,4,3,5];B.t2l=[1,4,7,4,5,7,6,7,8];B.t3l=[2,3,7,4,4,7,6,7,8];B.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];B.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];B.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];B.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];B.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];B.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];B.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];B.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];B.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];B.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];B.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];B.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];B.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];B.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4];B.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4];B.ht=[new W(0,0,null,null),new W(2,0,B.t1HB,B.t1l),new W(3,0,B.t2HB,B.t2l),new W(3,0,B.t3HB,B.t3l),new W(0,0,null,null),new W(4,0,B.t5HB,B.t5l),new W(4,0,B.t6HB,B.t6l),new W(6,0,B.t7HB,B.t7l),new W(6,0,B.t8HB,B.t8l),new W(6,0,B.t9HB,B.t9l),new W(8,0,B.t10HB,B.t10l),new W(8,0,B.t11HB,B.t11l),new W(8,0,B.t12HB,B.t12l),new W(16,0,B.t13HB,B.t13l),new W(0,0,null,B.t16_5l),new W(16,0,B.t15HB,B.t15l),new W(1,1,B.t16HB,B.t16l),new W(2,3,B.t16HB,B.t16l),new W(3,7,B.t16HB,B.t16l),new W(4,15,B.t16HB,B.t16l),new W(6,63,B.t16HB,B.t16l),new W(8,255,B.t16HB,B.t16l),new W(10,1023,B.t16HB,B.t16l),new W(13,8191,B.t16HB,B.t16l),new W(4,15,B.t24HB,B.t24l),new W(5,31,B.t24HB,B.t24l),new W(6,63,B.t24HB,B.t24l),new W(7,127,B.t24HB,B.t24l),new W(8,255,B.t24HB,B.t24l),new W(9,511,B.t24HB,B.t24l),new W(11,2047,B.t24HB,B.t24l),new W(13,8191,B.t24HB,B.t24l),new W(0,0,B.t32HB,B.t32l),new W(0,0,B.t33HB,B.t33l)];B.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];B.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];B.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];B.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];B.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];B.scfsi_band=[0,6,11,16,21];var w1=B,D0=p1,T0=n0;T0.System;var ee=T0.VbrMode,Ee=T0.Float;T0.ShortBlock;var Xe=T0.Util;T0.Arrays;T0.new_array_n;T0.new_byte;T0.new_double;var te=T0.new_float;T0.new_float_n;var xt=T0.new_int;T0.new_int_n;var U0=T0.assert,c0=d0(),pt=bt,v0=y1;F0.Q_MAX=256+1;F0.Q_MAX2=116;F0.LARGE_BITS=1e5;F0.IXMAX_VAL=8206;function F0(){var d=null,T=null,C=null;this.setModules=function(w,u,x){d=w,T=u,C=x};function j(w){return U0(0<=w+F0.Q_MAX2&&w<F0.Q_MAX),p[w+F0.Q_MAX2]}this.IPOW20=function(w){return U0(0<=w&&w<F0.Q_MAX),E[w]};var L=2220446049250313e-31,V=F0.IXMAX_VAL,Y=V+2,I=F0.Q_MAX,k=F0.Q_MAX2;F0.LARGE_BITS;var H=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var X=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=X,this.sfBandIndex=[new D0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new D0([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var p=te(I+k+1),E=te(I),F=te(Y),G=te(Y);this.adj43=G;function M(w,u){var x=C.ATHformula(u,w);return x-=H,x=Math.pow(10,x/10+w.ATHlower),x}function O(w){for(var u=w.internal_flags.ATH.l,x=w.internal_flags.ATH.psfb21,e=w.internal_flags.ATH.s,f=w.internal_flags.ATH.psfb12,v=w.internal_flags,b=w.out_samplerate,o=0;o<c0.SBMAX_l;o++){var r=v.scalefac_band.l[o],a=v.scalefac_band.l[o+1];u[o]=Ee.MAX_VALUE;for(var l=r;l<a;l++){var n=l*b/1152,t=M(w,n);u[o]=Math.min(u[o],t)}}for(var o=0;o<c0.PSFB21;o++){var r=v.scalefac_band.psfb21[o],a=v.scalefac_band.psfb21[o+1];x[o]=Ee.MAX_VALUE;for(var l=r;l<a;l++){var n=l*b/1152,t=M(w,n);x[o]=Math.min(x[o],t)}}for(var o=0;o<c0.SBMAX_s;o++){var r=v.scalefac_band.s[o],a=v.scalefac_band.s[o+1];e[o]=Ee.MAX_VALUE;for(var l=r;l<a;l++){var n=l*b/384,t=M(w,n);e[o]=Math.min(e[o],t)}e[o]*=v.scalefac_band.s[o+1]-v.scalefac_band.s[o]}for(var o=0;o<c0.PSFB12;o++){var r=v.scalefac_band.psfb12[o],a=v.scalefac_band.psfb12[o+1];f[o]=Ee.MAX_VALUE;for(var l=r;l<a;l++){var n=l*b/384,t=M(w,n);f[o]=Math.min(f[o],t)}f[o]*=v.scalefac_band.s[13]-v.scalefac_band.s[12]}if(w.noATH){for(var o=0;o<c0.SBMAX_l;o++)u[o]=1e-20;for(var o=0;o<c0.PSFB21;o++)x[o]=1e-20;for(var o=0;o<c0.SBMAX_s;o++)e[o]=1e-20;for(var o=0;o<c0.PSFB12;o++)f[o]=1e-20}v.ATH.floor=10*Math.log10(M(w,-1))}this.iteration_init=function(w){var u=w.internal_flags,x=u.l3_side,e;if(u.iteration_init_init==0){for(u.iteration_init_init=1,x.main_data_begin=0,O(w),F[0]=0,e=1;e<Y;e++)F[e]=Math.pow(e,4/3);for(e=0;e<Y-1;e++)G[e]=e+1-Math.pow(.5*(F[e]+F[e+1]),.75);for(G[e]=.5,e=0;e<I;e++)E[e]=Math.pow(2,(e-210)*-.1875);for(e=0;e<=I+k;e++)p[e]=Math.pow(2,(e-210-k)*.25);d.huffman_init(u);{var f,v,b,o;for(e=w.exp_nspsytune>>2&63,e>=32&&(e-=64),f=Math.pow(10,e/4/10),e=w.exp_nspsytune>>8&63,e>=32&&(e-=64),v=Math.pow(10,e/4/10),e=w.exp_nspsytune>>14&63,e>=32&&(e-=64),b=Math.pow(10,e/4/10),e=w.exp_nspsytune>>20&63,e>=32&&(e-=64),o=b*Math.pow(10,e/4/10),e=0;e<c0.SBMAX_l;e++){var r;e<=6?r=f:e<=13?r=v:e<=20?r=b:r=o,u.nsPsy.longfact[e]=r}for(e=0;e<c0.SBMAX_s;e++){var r;e<=5?r=f:e<=10?r=v:e<=11?r=b:r=o,u.nsPsy.shortfact[e]=r}}}},this.on_pe=function(w,u,x,e,f,v){var b=w.internal_flags,o=0,r,a=xt(2),l,n=new pt(o),t=T.ResvMaxBits(w,e,n,v);o=n.bits;var i=o+t;for(i>v0.MAX_BITS_PER_GRANULE&&(i=v0.MAX_BITS_PER_GRANULE),r=0,l=0;l<b.channels_out;++l)x[l]=Math.min(v0.MAX_BITS_PER_CHANNEL,o/b.channels_out),a[l]=0|x[l]*u[f][l]/700-x[l],a[l]>e*3/4&&(a[l]=e*3/4),a[l]<0&&(a[l]=0),a[l]+x[l]>v0.MAX_BITS_PER_CHANNEL&&(a[l]=Math.max(0,v0.MAX_BITS_PER_CHANNEL-x[l])),r+=a[l];if(r>t)for(l=0;l<b.channels_out;++l)a[l]=t*a[l]/r;for(l=0;l<b.channels_out;++l)x[l]+=a[l],t-=a[l];for(r=0,l=0;l<b.channels_out;++l)r+=x[l];if(r>v0.MAX_BITS_PER_GRANULE){var s=0;for(l=0;l<b.channels_out;++l)x[l]*=v0.MAX_BITS_PER_GRANULE,x[l]/=r,s+=x[l];U0(s<=v0.MAX_BITS_PER_GRANULE)}return i},this.reduce_side=function(w,u,x,e){U0(e<=v0.MAX_BITS_PER_GRANULE),U0(w[0]+w[1]<=v0.MAX_BITS_PER_GRANULE);var f=.33*(.5-u)/.5;f<0&&(f=0),f>.5&&(f=.5);var v=0|f*.5*(w[0]+w[1]);v>v0.MAX_BITS_PER_CHANNEL-w[0]&&(v=v0.MAX_BITS_PER_CHANNEL-w[0]),v<0&&(v=0),w[1]>=125&&(w[1]-v>125?(w[0]<x&&(w[0]+=v),w[1]-=v):(w[0]+=w[1]-125,w[1]=125)),v=w[0]+w[1],v>e&&(w[0]=e*w[0]/v,w[1]=e*w[1]/v),U0(w[0]<=v0.MAX_BITS_PER_CHANNEL),U0(w[1]<=v0.MAX_BITS_PER_CHANNEL),U0(w[0]+w[1]<=v0.MAX_BITS_PER_GRANULE)},this.athAdjust=function(w,u,x){var e=90.30873362,f=94.82444863,v=Xe.FAST_LOG10_X(u,10),b=w*w,o=0;return v-=x,b>1e-20&&(o=1+Xe.FAST_LOG10_X(b,10/e)),o<0&&(o=0),v*=o,v+=x+e-f,Math.pow(10,.1*v)},this.calc_xmin=function(w,u,x,e){var f=0,v=w.internal_flags,b,o=0,r=0,a=v.ATH,l=x.xr,n=w.VBR==ee.vbr_mtrh?1:0,t=v.masking_lower;for((w.VBR==ee.vbr_mtrh||w.VBR==ee.vbr_mt)&&(t=1),b=0;b<x.psy_lmax;b++){var i,s,m,c,_,A;w.VBR==ee.vbr_rh||w.VBR==ee.vbr_mtrh?s=athAdjust(a.adjust,a.l[b],a.floor):s=a.adjust*a.l[b],_=x.width[b],m=s/_,c=L,A=_>>1,i=0;do{var N,y;N=l[o]*l[o],i+=N,c+=N<m?N:m,o++,y=l[o]*l[o],i+=y,c+=y<m?y:m,o++}while(--A>0);if(i>s&&r++,b==c0.SBPSY_l){var S=s*v.nsPsy.longfact[b];c<S&&(c=S)}if(n!=0&&(s=c),!w.ATHonly){var $=u.en.l[b];if($>0){var S;S=i*u.thm.l[b]*t/$,n!=0&&(S*=v.nsPsy.longfact[b]),s<S&&(s=S)}}n!=0?e[f++]=s:e[f++]=s*v.nsPsy.longfact[b]}var q=575;if(x.block_type!=c0.SHORT_TYPE)for(var Q=576;Q--!=0&&BitStream.EQ(l[Q],0);)q=Q;x.max_nonzero_coeff=q;for(var K=x.sfb_smin;b<x.psymax;K++,b+=3){var _,i0,Z;for(w.VBR==ee.vbr_rh||w.VBR==ee.vbr_mtrh?Z=athAdjust(a.adjust,a.s[K],a.floor):Z=a.adjust*a.s[K],_=x.width[b],i0=0;i0<3;i0++){var i=0,s,m,c,A=_>>1;m=Z/_,c=L;do{var N,y;N=l[o]*l[o],i+=N,c+=N<m?N:m,o++,y=l[o]*l[o],i+=y,c+=y<m?y:m,o++}while(--A>0);if(i>Z&&r++,K==c0.SBPSY_s){var S=Z*v.nsPsy.shortfact[K];c<S&&(c=S)}if(n!=0?s=c:s=Z,!w.ATHonly&&!w.ATHshort){var $=u.en.s[K][i0];if($>0){var S;S=i*u.thm.s[K][i0]*t/$,n!=0&&(S*=v.nsPsy.shortfact[K]),s<S&&(s=S)}}n!=0?e[f++]=s:e[f++]=s*v.nsPsy.shortfact[K]}w.useTemporal&&(e[f-3]>e[f-3+1]&&(e[f-3+1]+=(e[f-3]-e[f-3+1])*v.decay),e[f-3+1]>e[f-3+2]&&(e[f-3+2]+=(e[f-3+1]-e[f-3+2])*v.decay))}return r};function _0(w){this.s=w}this.calc_noise_core=function(w,u,x,e){var f=0,v=u.s,b=w.l3_enc;if(v>w.count1)for(;x--!=0;){var o;o=w.xr[v],v++,f+=o*o,o=w.xr[v],v++,f+=o*o}else if(v>w.big_values){var r=te(2);for(r[0]=0,r[1]=e;x--!=0;){var o;o=Math.abs(w.xr[v])-r[b[v]],v++,f+=o*o,o=Math.abs(w.xr[v])-r[b[v]],v++,f+=o*o}}else for(;x--!=0;){var o;o=Math.abs(w.xr[v])-F[b[v]]*e,v++,f+=o*o,o=Math.abs(w.xr[v])-F[b[v]]*e,v++,f+=o*o}return u.s=v,f},this.calc_noise=function(w,u,x,e,f){var v=0,b=0,o,r,a=0,l=0,n=0,t=-20,i=0,s=w.scalefac,m=0;for(e.over_SSD=0,o=0;o<w.psymax;o++){var c=w.global_gain-(s[m++]+(w.preflag!=0?X[o]:0)<<w.scalefac_scale+1)-w.subblock_gain[w.window[o]]*8,_=0;if(f!=null&&f.step[o]==c)_=f.noise[o],i+=w.width[o],x[v++]=_/u[b++],_=f.noise_log[o];else{var A=j(c);if(r=w.width[o]>>1,i+w.width[o]>w.max_nonzero_coeff){var N;N=w.max_nonzero_coeff-i+1,N>0?r=N>>1:r=0}var y=new _0(i);_=this.calc_noise_core(w,y,r,A),i=y.s,f!=null&&(f.step[o]=c,f.noise[o]=_),_=x[v++]=_/u[b++],_=Xe.FAST_LOG10(Math.max(_,1e-20)),f!=null&&(f.noise_log[o]=_)}if(f!=null&&(f.global_gain=w.global_gain),n+=_,_>0){var S;S=Math.max(0|_*10+.5,1),e.over_SSD+=S*S,a++,l+=_}t=Math.max(t,_)}return e.over_count=a,e.tot_noise=n,e.over_noise=l,e.max_noise=t,a},this.set_pinfo=function(w,u,x,e,f){var v=w.internal_flags,b,o,r,a,l,n=u.scalefac_scale==0?.5:1,t=u.scalefac,i=te(L3Side.SFBMAX),s=te(L3Side.SFBMAX),m=new CalcNoiseResult;calc_xmin(w,x,u,i),calc_noise(u,i,s,m,null);var c=0;for(o=u.sfb_lmax,u.block_type!=c0.SHORT_TYPE&&u.mixed_block_flag==0&&(o=22),b=0;b<o;b++){var _=v.scalefac_band.l[b],A=v.scalefac_band.l[b+1],N=A-_;for(a=0;c<A;c++)a+=u.xr[c]*u.xr[c];a/=N,l=1e15,v.pinfo.en[e][f][b]=l*a,v.pinfo.xfsf[e][f][b]=l*i[b]*s[b]/N,x.en.l[b]>0&&!w.ATHonly?a=a/x.en.l[b]:a=0,v.pinfo.thr[e][f][b]=l*Math.max(a*x.thm.l[b],v.ATH.l[b]),v.pinfo.LAMEsfb[e][f][b]=0,u.preflag!=0&&b>=11&&(v.pinfo.LAMEsfb[e][f][b]=-n*X[b]),b<c0.SBPSY_l&&(U0(t[b]>=0),v.pinfo.LAMEsfb[e][f][b]-=n*t[b])}if(u.block_type==c0.SHORT_TYPE)for(o=b,b=u.sfb_smin;b<c0.SBMAX_s;b++)for(var _=v.scalefac_band.s[b],A=v.scalefac_band.s[b+1],N=A-_,y=0;y<3;y++){for(a=0,r=_;r<A;r++)a+=u.xr[c]*u.xr[c],c++;a=Math.max(a/N,1e-20),l=1e15,v.pinfo.en_s[e][f][3*b+y]=l*a,v.pinfo.xfsf_s[e][f][3*b+y]=l*i[o]*s[o]/N,x.en.s[b][y]>0?a=a/x.en.s[b][y]:a=0,(w.ATHonly||w.ATHshort)&&(a=0),v.pinfo.thr_s[e][f][3*b+y]=l*Math.max(a*x.thm.s[b][y],v.ATH.s[b]),v.pinfo.LAMEsfb_s[e][f][3*b+y]=-2*u.subblock_gain[y],b<c0.SBPSY_s&&(v.pinfo.LAMEsfb_s[e][f][3*b+y]-=n*t[o]),o++}v.pinfo.LAMEqss[e][f]=u.global_gain,v.pinfo.LAMEmainbits[e][f]=u.part2_3_length+u.part2_length,v.pinfo.LAMEsfbits[e][f]=u.part2_length,v.pinfo.over[e][f]=m.over_count,v.pinfo.max_noise[e][f]=m.max_noise*10,v.pinfo.over_noise[e][f]=m.over_noise*10,v.pinfo.tot_noise[e][f]=m.tot_noise*10,v.pinfo.over_SSD[e][f]=m.over_SSD}}var yt=F0,B0=n0,wt=B0.System;B0.VbrMode;B0.Float;B0.ShortBlock;B0.Util;var St=B0.Arrays;B0.new_array_n;B0.new_byte;B0.new_double;B0.new_float;B0.new_float_n;var ie=B0.new_int;B0.new_int_n;var H0=B0.assert,r0=d0(),s0=w1,At=x1,ae=yt;function De(){var d=null;this.qupvt=null,this.setModules=function(r){this.qupvt=r,d=r};function T(r){this.bits=0|r}var C=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function j(r,a,l,n,t,i){var s=.5946/a;for(H0(r>0),r=r>>1;r--!=0;)t[i++]=s>l[n++]?0:1,t[i++]=s>l[n++]?0:1}function L(r,a,l,n,t,i){H0(r>0),r=r>>1;var s=r%2;for(r=r>>1;r--!=0;){var m,c,_,A,N,y,S,$;m=l[n++]*a,c=l[n++]*a,N=0|m,_=l[n++]*a,y=0|c,A=l[n++]*a,S=0|_,m+=d.adj43[N],$=0|A,c+=d.adj43[y],t[i++]=0|m,_+=d.adj43[S],t[i++]=0|c,A+=d.adj43[$],t[i++]=0|_,t[i++]=0|A}if(s!=0){var m,c,N,y;m=l[n++]*a,c=l[n++]*a,N=0|m,y=0|c,m+=d.adj43[N],c+=d.adj43[y],t[i++]=0|m,t[i++]=0|c}}function V(r,a,l,n,t){var i,s,m=0,c,_=0,A=0,N=0,y=a,S=0,$=y,q=0,Q=r,K=0;for(c=t!=null&&n.global_gain==t.global_gain,n.block_type==r0.SHORT_TYPE?s=38:s=21,i=0;i<=s;i++){var i0=-1;if((c||n.block_type==r0.NORM_TYPE)&&(i0=n.global_gain-(n.scalefac[i]+(n.preflag!=0?d.pretab[i]:0)<<n.scalefac_scale+1)-n.subblock_gain[n.window[i]]*8),H0(n.width[i]>=0),c&&t.step[i]==i0)_!=0&&(L(_,l,Q,K,$,q),_=0),A!=0&&(j(A,l,Q,K,$,q),A=0);else{var Z=n.width[i];if(m+n.width[i]>n.max_nonzero_coeff){var f0;f0=n.max_nonzero_coeff-m+1,St.fill(a,n.max_nonzero_coeff,576,0),Z=f0,Z<0&&(Z=0),i=s+1}if(_==0&&A==0&&($=y,q=S,Q=r,K=N),t!=null&&t.sfb_count1>0&&i>=t.sfb_count1&&t.step[i]>0&&i0>=t.step[i]?(_!=0&&(L(_,l,Q,K,$,q),_=0,$=y,q=S,Q=r,K=N),A+=Z):(A!=0&&(j(A,l,Q,K,$,q),A=0,$=y,q=S,Q=r,K=N),_+=Z),Z<=0){A!=0&&(j(A,l,Q,K,$,q),A=0),_!=0&&(L(_,l,Q,K,$,q),_=0);break}}i<=s&&(S+=n.width[i],N+=n.width[i],m+=n.width[i])}_!=0&&(L(_,l,Q,K,$,q),_=0),A!=0&&(j(A,l,Q,K,$,q),A=0)}function Y(r,a,l){var n=0,t=0;do{var i=r[a++],s=r[a++];n<i&&(n=i),t<s&&(t=s)}while(a<l);return n<t&&(n=t),n}function I(r,a,l,n,t,i){var s=s0.ht[n].xlen*65536+s0.ht[t].xlen,m=0,c;do{var _=r[a++],A=r[a++];_!=0&&(_>14&&(_=15,m+=s),_*=16),A!=0&&(A>14&&(A=15,m+=s),_+=A),m+=s0.largetbl[_]}while(a<l);return c=m&65535,m>>=16,m>c&&(m=c,n=t),i.bits+=m,n}function k(r,a,l,n){var t=0,i=s0.ht[1].hlen;do{var s=r[a+0]*2+r[a+1];a+=2,t+=i[s]}while(a<l);return n.bits+=t,1}function H(r,a,l,n,t){var i=0,s,m=s0.ht[n].xlen,c;n==2?c=s0.table23:c=s0.table56;do{var _=r[a+0]*m+r[a+1];a+=2,i+=c[_]}while(a<l);return s=i&65535,i>>=16,i>s&&(i=s,n++),t.bits+=i,n}function X(r,a,l,n,t){var i=0,s=0,m=0,c=s0.ht[n].xlen,_=s0.ht[n].hlen,A=s0.ht[n+1].hlen,N=s0.ht[n+2].hlen;do{var y=r[a+0]*c+r[a+1];a+=2,i+=_[y],s+=A[y],m+=N[y]}while(a<l);var S=n;return i>s&&(i=s,S++),i>m&&(i=m,S=n+2),t.bits+=i,S}var p=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function E(r,a,l,n){var t=Y(r,a,l);switch(t){case 0:return t;case 1:return k(r,a,l,n);case 2:case 3:return H(r,a,l,p[t-1],n);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return X(r,a,l,p[t-1],n);default:if(t>ae.IXMAX_VAL)return n.bits=ae.LARGE_BITS,-1;t-=15;var i;for(i=24;i<32&&!(s0.ht[i].linmax>=t);i++);var s;for(s=i-8;s<24&&!(s0.ht[s].linmax>=t);s++);return I(r,a,l,s,i,n)}}this.noquant_count_bits=function(r,a,l){var n=a.l3_enc,t=Math.min(576,a.max_nonzero_coeff+2>>1<<1);for(l!=null&&(l.sfb_count1=0);t>1&&!(n[t-1]|n[t-2]);t-=2);a.count1=t;for(var i=0,s=0;t>3;t-=4){var m;if(((n[t-1]|n[t-2]|n[t-3]|n[t-4])&2147483647)>1)break;m=((n[t-4]*2+n[t-3])*2+n[t-2])*2+n[t-1],i+=s0.t32l[m],s+=s0.t33l[m]}var c=i;if(a.count1table_select=0,i>s&&(c=s,a.count1table_select=1),a.count1bits=c,a.big_values=t,t==0)return c;if(a.block_type==r0.SHORT_TYPE)i=3*r.scalefac_band.s[3],i>a.big_values&&(i=a.big_values),s=a.big_values;else if(a.block_type==r0.NORM_TYPE){if(H0(t<=576),i=a.region0_count=r.bv_scf[t-2],s=a.region1_count=r.bv_scf[t-1],H0(i+s+2<r0.SBPSY_l),s=r.scalefac_band.l[i+s+2],i=r.scalefac_band.l[i+1],s<t){var _=new T(c);a.table_select[2]=E(n,s,t,_),c=_.bits}}else a.region0_count=7,a.region1_count=r0.SBMAX_l-1-7-1,i=r.scalefac_band.l[7+1],s=t,i>s&&(i=s);if(i=Math.min(i,t),s=Math.min(s,t),H0(i>=0),H0(s>=0),0<i){var _=new T(c);a.table_select[0]=E(n,0,i,_),c=_.bits}if(i<s){var _=new T(c);a.table_select[1]=E(n,i,s,_),c=_.bits}if(r.use_best_huffman==2&&(a.part2_3_length=c,best_huffman_divide(r,a),c=a.part2_3_length),l!=null&&a.block_type==r0.NORM_TYPE){for(var A=0;r.scalefac_band.l[A]<a.big_values;)A++;l.sfb_count1=A}return c},this.count_bits=function(r,a,l,n){var t=l.l3_enc,i=ae.IXMAX_VAL/d.IPOW20(l.global_gain);if(l.xrpow_max>i)return ae.LARGE_BITS;if(V(a,t,d.IPOW20(l.global_gain),l,n),r.substep_shaping&2)for(var s=0,m=l.global_gain+l.scalefac_scale,c=.634521682242439/d.IPOW20(m),_=0;_<l.sfbmax;_++){var A=l.width[_];if(H0(A>=0),r.pseudohalf[_]==0)s+=A;else{var N;for(N=s,s+=A;N<s;++N)t[N]=a[N]>=c?t[N]:0}}return this.noquant_count_bits(r,l,n)};function F(r,a,l,n,t,i,s){for(var m=a.big_values,c=0;c<=7+15;c++)n[c]=ae.LARGE_BITS;for(var c=0;c<16;c++){var _=r.scalefac_band.l[c+1];if(_>=m)break;var A=0,N=new T(A),y=E(l,0,_,N);A=N.bits;for(var S=0;S<8;S++){var $=r.scalefac_band.l[c+S+2];if($>=m)break;var q=A;N=new T(q);var Q=E(l,_,$,N);q=N.bits,n[c+S]>q&&(n[c+S]=q,t[c+S]=c,i[c+S]=y,s[c+S]=Q)}}}function G(r,a,l,n,t,i,s,m){for(var c=a.big_values,_=2;_<r0.SBMAX_l+1;_++){var A=r.scalefac_band.l[_];if(A>=c)break;var N=t[_-2]+a.count1bits;if(l.part2_3_length<=N)break;var y=new T(N),S=E(n,A,c,y);N=y.bits,!(l.part2_3_length<=N)&&(l.assign(a),l.part2_3_length=N,l.region0_count=i[_-2],l.region1_count=_-2-i[_-2],l.table_select[0]=s[_-2],l.table_select[1]=m[_-2],l.table_select[2]=S)}}this.best_huffman_divide=function(r,a){var l=new At,n=a.l3_enc,t=ie(7+15+1),i=ie(7+15+1),s=ie(7+15+1),m=ie(7+15+1);if(!(a.block_type==r0.SHORT_TYPE&&r.mode_gr==1)){l.assign(a),a.block_type==r0.NORM_TYPE&&(F(r,a,n,t,i,s,m),G(r,l,a,n,t,i,s,m));var c=l.big_values;if(!(c==0||(n[c-2]|n[c-1])>1)&&(c=a.count1+2,!(c>576))){l.assign(a),l.count1=c;var _=0,A=0;for(H0(c<=576);c>l.big_values;c-=4){var N=((n[c-4]*2+n[c-3])*2+n[c-2])*2+n[c-1];_+=s0.t32l[N],A+=s0.t33l[N]}if(l.big_values=c,l.count1table_select=0,_>A&&(_=A,l.count1table_select=1),l.count1bits=_,l.block_type==r0.NORM_TYPE)G(r,l,a,n,t,i,s,m);else{if(l.part2_3_length=_,_=r.scalefac_band.l[7+1],_>c&&(_=c),_>0){var y=new T(l.part2_3_length);l.table_select[0]=E(n,0,_,y),l.part2_3_length=y.bits}if(c>_){var y=new T(l.part2_3_length);l.table_select[1]=E(n,_,c,y),l.part2_3_length=y.bits}a.part2_3_length>l.part2_3_length&&a.assign(l)}}}};var M=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],O=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],_0=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],w=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];De.slen1_tab=_0,De.slen2_tab=w;function u(r,a){for(var l,n=a.tt[1][r],t=a.tt[0][r],i=0;i<s0.scfsi_band.length-1;i++){for(l=s0.scfsi_band[i];l<s0.scfsi_band[i+1]&&!(t.scalefac[l]!=n.scalefac[l]&&n.scalefac[l]>=0);l++);if(l==s0.scfsi_band[i+1]){for(l=s0.scfsi_band[i];l<s0.scfsi_band[i+1];l++)n.scalefac[l]=-1;a.scfsi[r][i]=1}}var s=0,m=0;for(l=0;l<11;l++)n.scalefac[l]!=-1&&(m++,s<n.scalefac[l]&&(s=n.scalefac[l]));for(var c=0,_=0;l<r0.SBPSY_l;l++)n.scalefac[l]!=-1&&(_++,c<n.scalefac[l]&&(c=n.scalefac[l]));for(var i=0;i<16;i++)if(s<M[i]&&c<O[i]){var A=_0[i]*m+w[i]*_;n.part2_length>A&&(n.part2_length=A,n.scalefac_compress=i)}}this.best_scalefac_store=function(r,a,l,n){var t=n.tt[a][l],i,s,m,c,_=0;for(m=0,i=0;i<t.sfbmax;i++){var A=t.width[i];for(H0(A>=0),m+=A,c=-A;c<0&&t.l3_enc[c+m]==0;c++);c==0&&(t.scalefac[i]=_=-2)}if(t.scalefac_scale==0&&t.preflag==0){var N=0;for(i=0;i<t.sfbmax;i++)t.scalefac[i]>0&&(N|=t.scalefac[i]);if(!(N&1)&&N!=0){for(i=0;i<t.sfbmax;i++)t.scalefac[i]>0&&(t.scalefac[i]>>=1);t.scalefac_scale=_=1}}if(t.preflag==0&&t.block_type!=r0.SHORT_TYPE&&r.mode_gr==2){for(i=11;i<r0.SBPSY_l&&!(t.scalefac[i]<d.pretab[i]&&t.scalefac[i]!=-2);i++);if(i==r0.SBPSY_l){for(i=11;i<r0.SBPSY_l;i++)t.scalefac[i]>0&&(t.scalefac[i]-=d.pretab[i]);t.preflag=_=1}}for(s=0;s<4;s++)n.scfsi[l][s]=0;for(r.mode_gr==2&&a==1&&n.tt[0][l].block_type!=r0.SHORT_TYPE&&n.tt[1][l].block_type!=r0.SHORT_TYPE&&(u(l,n),_=0),i=0;i<t.sfbmax;i++)t.scalefac[i]==-2&&(t.scalefac[i]=0);_!=0&&(r.mode_gr==2?this.scale_bitcount(t):this.scale_bitcount_lsf(r,t))};function x(r,a){for(var l=0;l<a;++l)if(r[l]<0)return!1;return!0}var e=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],f=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],v=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(r){var a,l,n=0,t=0,i,s=r.scalefac;if(H0(x(s,r.sfbmax)),r.block_type==r0.SHORT_TYPE)i=e,r.mixed_block_flag!=0&&(i=f);else if(i=v,r.preflag==0){for(l=11;l<r0.SBPSY_l&&!(s[l]<d.pretab[l]);l++);if(l==r0.SBPSY_l)for(r.preflag=1,l=11;l<r0.SBPSY_l;l++)s[l]-=d.pretab[l]}for(l=0;l<r.sfbdivide;l++)n<s[l]&&(n=s[l]);for(;l<r.sfbmax;l++)t<s[l]&&(t=s[l]);for(r.part2_length=ae.LARGE_BITS,a=0;a<16;a++)n<M[a]&&t<O[a]&&r.part2_length>i[a]&&(r.part2_length=i[a],r.scalefac_compress=a);return r.part2_length==ae.LARGE_BITS};var b=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(r,a){var l,n,t,i,s,m,c,_,A=ie(4),N=a.scalefac;for(a.preflag!=0?l=2:l=0,c=0;c<4;c++)A[c]=0;if(a.block_type==r0.SHORT_TYPE){n=1;var y=d.nr_of_sfb_block[l][n];for(_=0,t=0;t<4;t++)for(i=y[t]/3,c=0;c<i;c++,_++)for(s=0;s<3;s++)N[_*3+s]>A[t]&&(A[t]=N[_*3+s])}else{n=0;var y=d.nr_of_sfb_block[l][n];for(_=0,t=0;t<4;t++)for(i=y[t],c=0;c<i;c++,_++)N[_]>A[t]&&(A[t]=N[_])}for(m=!1,t=0;t<4;t++)A[t]>b[l][t]&&(m=!0);if(!m){var S,$,q,Q;for(a.sfb_partition_table=d.nr_of_sfb_block[l][n],t=0;t<4;t++)a.slen[t]=o[A[t]];switch(S=a.slen[0],$=a.slen[1],q=a.slen[2],Q=a.slen[3],l){case 0:a.scalefac_compress=(S*5+$<<4)+(q<<2)+Q;break;case 1:a.scalefac_compress=400+(S*5+$<<2)+q;break;case 2:a.scalefac_compress=500+S*3+$;break;default:wt.err.printf(`intensity stereo not implemented yet
`);break}}if(!m)for(H0(a.sfb_partition_table!=null),a.part2_length=0,t=0;t<4;t++)a.part2_length+=a.slen[t]*a.sfb_partition_table[t];return m};var o=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(r){for(var a=2;a<=576;a+=2){for(var l=0,n;r.scalefac_band.l[++l]<a;);for(n=C[l][0];r.scalefac_band.l[n+1]>a;)n--;for(n<0&&(n=C[l][0]),r.bv_scf[a-2]=n,n=C[l][1];r.scalefac_band.l[n+r.bv_scf[a-2]+2]>a;)n--;n<0&&(n=C[l][1]),r.bv_scf[a-1]=n}}}var Et=De,C0=n0,V0=C0.System;C0.VbrMode;C0.Float;C0.ShortBlock;C0.Util;var Rt=C0.Arrays;C0.new_array_n;var Mt=C0.new_byte;C0.new_double;C0.new_float;var Nt=C0.new_float_n,Tt=C0.new_int;C0.new_int_n;var U=C0.assert,a1=Et,Ve=w1,Re=d0(),ne=y1;Ue.EQ=function(d,T){return Math.abs(d)>Math.abs(T)?Math.abs(d-T)<=Math.abs(d)*1e-6:Math.abs(d-T)<=Math.abs(T)*1e-6};Ue.NEQ=function(d,T){return!Ue.EQ(d,T)};function Ue(){var d=this,T=32773,C=32,j=null,L=null,V=null,Y=null;this.setModules=function(o,r,a,l){j=o,L=r,V=a,Y=l};var I=null,k=0,H=0,X=0;this.getframebits=function(o){var r=o.internal_flags,a;r.bitrate_index!=0?a=Ve.bitrate_table[o.version][r.bitrate_index]:a=o.brate,U(8<=a&&a<=640);var l=0|(o.version+1)*72e3*a/o.out_samplerate+r.padding;return 8*l};function p(o){V0.arraycopy(o.header[o.w_ptr].buf,0,I,H,o.sideinfo_len),H+=o.sideinfo_len,k+=o.sideinfo_len*8,o.w_ptr=o.w_ptr+1&ne.MAX_HEADER_BUF-1}function E(o,r,a){for(U(a<C-2);a>0;){var l;X==0&&(X=8,H++,U(H<Lame.LAME_MAXMP3BUFFER),U(o.header[o.w_ptr].write_timing>=k),o.header[o.w_ptr].write_timing==k&&p(o),I[H]=0),l=Math.min(a,X),a-=l,X-=l,U(a<C),U(X<C),I[H]|=r>>a<<X,k+=l}}function F(o,r,a){for(U(a<C-2);a>0;){var l;X==0&&(X=8,H++,U(H<Lame.LAME_MAXMP3BUFFER),I[H]=0),l=Math.min(a,X),a-=l,X-=l,U(a<C),U(X<C),I[H]|=r>>a<<X,k+=l}}function G(o,r){var a=o.internal_flags,l;if(U(r>=0),r>=8&&(E(a,76,8),r-=8),r>=8&&(E(a,65,8),r-=8),r>=8&&(E(a,77,8),r-=8),r>=8&&(E(a,69,8),r-=8),r>=32){var n=V.getLameShortVersion();if(r>=32)for(l=0;l<n.length&&r>=8;++l)r-=8,E(a,n.charAt(l),8)}for(;r>=1;r-=1)E(a,a.ancillary_flag,1),a.ancillary_flag^=o.disable_reservoir?0:1;U(r==0)}function M(o,r,a){for(var l=o.header[o.h_ptr].ptr;a>0;){var n=Math.min(a,8-(l&7));a-=n,U(a<C),o.header[o.h_ptr].buf[l>>3]|=r>>a<<8-(l&7)-n,l+=n}o.header[o.h_ptr].ptr=l}function O(o,r){o<<=8;for(var a=0;a<8;a++)o<<=1,r<<=1,(r^o)&65536&&(r^=T);return r}this.CRC_writeheader=function(o,r){var a=65535;a=O(r[2]&255,a),a=O(r[3]&255,a);for(var l=6;l<o.sideinfo_len;l++)a=O(r[l]&255,a);r[4]=byte(a>>8),r[5]=byte(a&255)};function _0(o,r){var a=o.internal_flags,l,n,t;if(l=a.l3_side,a.header[a.h_ptr].ptr=0,Rt.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),o.out_samplerate<16e3?M(a,4094,12):M(a,4095,12),M(a,o.version,1),M(a,4-3,2),M(a,o.error_protection?0:1,1),M(a,a.bitrate_index,4),M(a,a.samplerate_index,2),M(a,a.padding,1),M(a,o.extension,1),M(a,o.mode.ordinal(),2),M(a,a.mode_ext,2),M(a,o.copyright,1),M(a,o.original,1),M(a,o.emphasis,2),o.error_protection&&M(a,0,16),o.version==1){for(U(l.main_data_begin>=0),M(a,l.main_data_begin,9),a.channels_out==2?M(a,l.private_bits,3):M(a,l.private_bits,5),t=0;t<a.channels_out;t++){var i;for(i=0;i<4;i++)M(a,l.scfsi[t][i],1)}for(n=0;n<2;n++)for(t=0;t<a.channels_out;t++){var s=l.tt[n][t];M(a,s.part2_3_length+s.part2_length,12),M(a,s.big_values/2,9),M(a,s.global_gain,8),M(a,s.scalefac_compress,4),s.block_type!=Re.NORM_TYPE?(M(a,1,1),M(a,s.block_type,2),M(a,s.mixed_block_flag,1),s.table_select[0]==14&&(s.table_select[0]=16),M(a,s.table_select[0],5),s.table_select[1]==14&&(s.table_select[1]=16),M(a,s.table_select[1],5),M(a,s.subblock_gain[0],3),M(a,s.subblock_gain[1],3),M(a,s.subblock_gain[2],3)):(M(a,0,1),s.table_select[0]==14&&(s.table_select[0]=16),M(a,s.table_select[0],5),s.table_select[1]==14&&(s.table_select[1]=16),M(a,s.table_select[1],5),s.table_select[2]==14&&(s.table_select[2]=16),M(a,s.table_select[2],5),U(0<=s.region0_count&&s.region0_count<16),U(0<=s.region1_count&&s.region1_count<8),M(a,s.region0_count,4),M(a,s.region1_count,3)),M(a,s.preflag,1),M(a,s.scalefac_scale,1),M(a,s.count1table_select,1)}}else for(U(l.main_data_begin>=0),M(a,l.main_data_begin,8),M(a,l.private_bits,a.channels_out),n=0,t=0;t<a.channels_out;t++){var s=l.tt[n][t];M(a,s.part2_3_length+s.part2_length,12),M(a,s.big_values/2,9),M(a,s.global_gain,8),M(a,s.scalefac_compress,9),s.block_type!=Re.NORM_TYPE?(M(a,1,1),M(a,s.block_type,2),M(a,s.mixed_block_flag,1),s.table_select[0]==14&&(s.table_select[0]=16),M(a,s.table_select[0],5),s.table_select[1]==14&&(s.table_select[1]=16),M(a,s.table_select[1],5),M(a,s.subblock_gain[0],3),M(a,s.subblock_gain[1],3),M(a,s.subblock_gain[2],3)):(M(a,0,1),s.table_select[0]==14&&(s.table_select[0]=16),M(a,s.table_select[0],5),s.table_select[1]==14&&(s.table_select[1]=16),M(a,s.table_select[1],5),s.table_select[2]==14&&(s.table_select[2]=16),M(a,s.table_select[2],5),U(0<=s.region0_count&&s.region0_count<16),U(0<=s.region1_count&&s.region1_count<8),M(a,s.region0_count,4),M(a,s.region1_count,3)),M(a,s.scalefac_scale,1),M(a,s.count1table_select,1)}o.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);{var m=a.h_ptr;U(a.header[m].ptr==a.sideinfo_len*8),a.h_ptr=m+1&ne.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[m].write_timing+r,a.h_ptr==a.w_ptr&&V0.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function w(o,r){var a=Ve.ht[r.count1table_select+32],l,n=0,t=r.big_values,i=r.big_values;for(U(r.count1table_select<2),l=(r.count1-r.big_values)/4;l>0;--l){var s=0,m=0,c;c=r.l3_enc[t+0],c!=0&&(m+=8,r.xr[i+0]<0&&s++,U(c<=1)),c=r.l3_enc[t+1],c!=0&&(m+=4,s*=2,r.xr[i+1]<0&&s++,U(c<=1)),c=r.l3_enc[t+2],c!=0&&(m+=2,s*=2,r.xr[i+2]<0&&s++,U(c<=1)),c=r.l3_enc[t+3],c!=0&&(m++,s*=2,r.xr[i+3]<0&&s++,U(c<=1)),t+=4,i+=4,E(o,s+a.table[m],a.hlen[m]),n+=a.hlen[m]}return n}function u(o,r,a,l,n){var t=Ve.ht[r],i=0;if(U(r<32),r==0)return i;for(var s=a;s<l;s+=2){var m=0,c=0,_=t.xlen,A=t.xlen,N=0,y=n.l3_enc[s],S=n.l3_enc[s+1];if(y!=0&&(n.xr[s]<0&&N++,m--),r>15){if(y>14){var $=y-15;U($<=t.linmax),N|=$<<1,c=_,y=15}if(S>14){var q=S-15;U(q<=t.linmax),N<<=_,N|=q,c+=_,S=15}A=16}S!=0&&(N<<=1,n.xr[s+1]<0&&N++,m--),U((y|S)<16),y=y*A+S,c-=m,m+=t.hlen[y],U(m<=C),U(c<=C),E(o,t.table[y],m),E(o,N,c),i+=m+c}return i}function x(o,r){var a=3*o.scalefac_band.s[3];a>r.big_values&&(a=r.big_values);var l=u(o,r.table_select[0],0,a,r);return l+=u(o,r.table_select[1],a,r.big_values,r),l}function e(o,r){var a,l,n,t;a=r.big_values,U(0<=a&&a<=576);var i=r.region0_count+1;return U(0<=i),U(i<o.scalefac_band.l.length),n=o.scalefac_band.l[i],i+=r.region1_count+1,U(0<=i),U(i<o.scalefac_band.l.length),t=o.scalefac_band.l[i],n>a&&(n=a),t>a&&(t=a),l=u(o,r.table_select[0],0,n,r),l+=u(o,r.table_select[1],n,t,r),l+=u(o,r.table_select[2],t,a,r),l}function f(o){var r,a,l,n,t=0,i=o.internal_flags,s=i.l3_side;if(o.version==1)for(r=0;r<2;r++)for(a=0;a<i.channels_out;a++){var m=s.tt[r][a],c=a1.slen1_tab[m.scalefac_compress],_=a1.slen2_tab[m.scalefac_compress];for(n=0,l=0;l<m.sfbdivide;l++)m.scalefac[l]!=-1&&(E(i,m.scalefac[l],c),n+=c);for(;l<m.sfbmax;l++)m.scalefac[l]!=-1&&(E(i,m.scalefac[l],_),n+=_);U(n==m.part2_length),m.block_type==Re.SHORT_TYPE?n+=x(i,m):n+=e(i,m),n+=w(i,m),U(n==m.part2_3_length+m.part2_length),t+=n}else for(r=0,a=0;a<i.channels_out;a++){var m=s.tt[r][a],A,N,y=0;if(U(m.sfb_partition_table!=null),n=0,l=0,N=0,m.block_type==Re.SHORT_TYPE){for(;N<4;N++){var S=m.sfb_partition_table[N]/3,$=m.slen[N];for(A=0;A<S;A++,l++)E(i,Math.max(m.scalefac[l*3+0],0),$),E(i,Math.max(m.scalefac[l*3+1],0),$),E(i,Math.max(m.scalefac[l*3+2],0),$),y+=3*$}n+=x(i,m)}else{for(;N<4;N++){var S=m.sfb_partition_table[N],$=m.slen[N];for(A=0;A<S;A++,l++)E(i,Math.max(m.scalefac[l],0),$),y+=$}n+=e(i,m)}n+=w(i,m),U(n==m.part2_3_length),U(y==m.part2_length),t+=y+n}return t}function v(){this.total=0}function b(o,r){var a=o.internal_flags,l,n,t,i,s;return s=a.w_ptr,i=a.h_ptr-1,i==-1&&(i=ne.MAX_HEADER_BUF-1),l=a.header[i].write_timing-k,r.total=l,l>=0&&(n=1+i-s,i<s&&(n=1+i-s+ne.MAX_HEADER_BUF),l-=n*8*a.sideinfo_len),t=d.getframebits(o),l+=t,r.total+=t,r.total%8!=0?r.total=1+r.total/8:r.total=r.total/8,r.total+=H+1,l<0&&V0.err.println(`strange error flushing buffer ... 
`),l}this.flush_bitstream=function(o){var r=o.internal_flags,a,l,n=r.h_ptr-1;if(n==-1&&(n=ne.MAX_HEADER_BUF-1),a=r.l3_side,!((l=b(o,new v))<0)){if(G(o,l),U(r.header[n].write_timing+this.getframebits(o)==k),r.ResvSize=0,a.main_data_begin=0,r.findReplayGain){var t=j.GetTitleGain(r.rgdata);U(NEQ(t,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),r.RadioGain=Math.floor(t*10+.5)|0}r.findPeakSample&&(r.noclipGainChange=Math.ceil(Math.log10(r.PeakSample/32767)*20*10)|0,r.noclipGainChange>0&&(EQ(o.scale,1)||EQ(o.scale,0))?r.noclipScale=Math.floor(32767/r.PeakSample*100)/100:r.noclipScale=-1)}},this.add_dummy_byte=function(o,r,a){for(var l=o.internal_flags,n;a-- >0;)for(F(l,r,8),n=0;n<ne.MAX_HEADER_BUF;++n)l.header[n].write_timing+=8},this.format_bitstream=function(o){var r=o.internal_flags,a;a=r.l3_side;var l=this.getframebits(o);G(o,a.resvDrain_pre),_0(o,l);var n=8*r.sideinfo_len;if(n+=f(o),G(o,a.resvDrain_post),n+=a.resvDrain_post,a.main_data_begin+=(l-n)/8,b(o,new v)!=r.ResvSize&&V0.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),a.main_data_begin*8!=r.ResvSize&&(V0.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*a.main_data_begin,r.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*r.sideinfo_len,n-a.resvDrain_post-8*r.sideinfo_len,n,n%8,l),V0.err.println("This is a fatal error.  It has several possible causes:"),V0.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),V0.err.println(" 9%%  Your system is overclocked"),V0.err.println(" 1%%  bug in LAME encoding library"),r.ResvSize=a.main_data_begin*8),U(k%8==0),k>1e9){var t;for(t=0;t<ne.MAX_HEADER_BUF;++t)r.header[t].write_timing-=k;k=0}return 0},this.copy_buffer=function(o,r,a,l,n){var t=H+1;if(t<=0)return 0;if(l!=0&&t>l)return-1;if(V0.arraycopy(I,0,r,a,t),H=-1,X=0,n!=0){var i=Tt(1);if(i[0]=o.nMusicCRC,Y.updateMusicCRC(i,r,a,t),o.nMusicCRC=i[0],t>0&&(o.VBR_seek_table.nBytesWritten+=t),o.decode_on_the_fly){for(var s=Nt([2,1152]),m=t,c=-1,_;c!=0;)if(c=L.hip_decode1_unclipped(o.hip,r,a,m,s[0],s[1]),m=0,c==-1&&(c=0),c>0){if(U(c<=1152),o.findPeakSample){for(_=0;_<c;_++)s[0][_]>o.PeakSample?o.PeakSample=s[0][_]:-s[0][_]>o.PeakSample&&(o.PeakSample=-s[0][_]);if(o.channels_out>1)for(_=0;_<c;_++)s[1][_]>o.PeakSample?o.PeakSample=s[1][_]:-s[1][_]>o.PeakSample&&(o.PeakSample=-s[1][_])}if(o.findReplayGain&&j.AnalyzeSamples(o.rgdata,s[0],0,s[1],0,c,o.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return t},this.init_bit_stream_w=function(o){I=Mt(Lame.LAME_MAXMP3BUFFER),o.h_ptr=o.w_ptr=0,o.header[o.h_ptr].write_timing=0,H=-1,X=0,k=0}}var m0=n0;m0.System;m0.VbrMode;m0.Float;m0.ShortBlock;m0.Util;m0.Arrays;m0.new_array_n;m0.new_byte;m0.new_double;m0.new_float;m0.new_float_n;m0.new_int;m0.new_int_n;m0.new_short_n;m0.assert;d0();var k0=n0;k0.System;k0.VbrMode;k0.Float;k0.ShortBlock;k0.Util;k0.Arrays;k0.new_array_n;k0.new_byte;k0.new_double;k0.new_float;k0.new_float_n;k0.new_int;k0.new_int_n;k0.assert;var Ye=n0;Ye.new_float;Ye.new_int;Ye.assert;var j0=n0;j0.System;j0.VbrMode;j0.Float;j0.ShortBlock;j0.Util;j0.Arrays;j0.new_array_n;j0.new_byte;j0.new_double;j0.new_float;j0.new_float_n;j0.new_int;j0.new_int_n;j0.assert;d0();var Bt=n0;Bt.assert;var I0=n0,Ct=I0.System,Ge=I0.VbrMode;I0.Float;var n1=I0.ShortBlock;I0.Util;var kt=I0.Arrays;I0.new_array_n;var Me=I0.new_byte;I0.new_double;I0.new_float;I0.new_float_n;I0.new_int;I0.new_int_n;var jt=I0.assert;Ne.NUMTOCENTRIES=100;Ne.MAXFRAMESIZE=2880;function Ne(){var d,T,C;this.setModules=function(n,t,i){d=n,T=t,C=i};var j=1,L=2,V=4,Y=8,I=Ne.NUMTOCENTRIES,k=Ne.MAXFRAMESIZE,H=I+4+4+4+4+4,X=H+9+1+1+8+1+1+3+1+1+2+4+2+2,p=128,E=64,F=32,G=null,M="Xing",O="Info",_0=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function w(n,t){if(n.nVbrNumFrames++,n.sum+=t,n.seen++,!(n.seen<n.want)&&(n.pos<n.size&&(n.bag[n.pos]=n.sum,n.pos++,n.seen=0),n.pos==n.size)){for(var i=1;i<n.size;i+=2)n.bag[i/2]=n.bag[i];n.want*=2,n.pos/=2}}function u(n,t){if(!(n.pos<=0))for(var i=1;i<I;++i){var s=i/I,m,c,_=0|Math.floor(s*n.pos);_>n.pos-1&&(_=n.pos-1),m=n.bag[_],c=n.sum;var A=0|256*m/c;A>255&&(A=255),t[i]=255&A}}this.addVbrFrame=function(n){var t=n.internal_flags,i=Tables.bitrate_table[n.version][t.bitrate_index];jt(t.VBR_seek_table.bag!=null),w(t.VBR_seek_table,i)};function x(n,t){var i=n[t+0]&255;return i<<=8,i|=n[t+1]&255,i<<=8,i|=n[t+2]&255,i<<=8,i|=n[t+3]&255,i}function e(n,t,i){n[t+0]=255&(i>>24&255),n[t+1]=255&(i>>16&255),n[t+2]=255&(i>>8&255),n[t+3]=255&(i&255)}function f(n,t,i){n[t+0]=255&(i>>8&255),n[t+1]=255&(i&255)}function v(n,t){return new String(n,t,M.length(),G).equals(M)||new String(n,t,O.length(),G).equals(O)}function b(n,t,i){return 255&(n<<t|i&~(-1<<t))}function o(n,t){var i=n.internal_flags;t[0]=b(t[0],8,255),t[1]=b(t[1],3,7),t[1]=b(t[1],1,n.out_samplerate<16e3?0:1),t[1]=b(t[1],1,n.version),t[1]=b(t[1],2,4-3),t[1]=b(t[1],1,n.error_protection?0:1),t[2]=b(t[2],4,i.bitrate_index),t[2]=b(t[2],2,i.samplerate_index),t[2]=b(t[2],1,0),t[2]=b(t[2],1,n.extension),t[3]=b(t[3],2,n.mode.ordinal()),t[3]=b(t[3],2,i.mode_ext),t[3]=b(t[3],1,n.copyright),t[3]=b(t[3],1,n.original),t[3]=b(t[3],2,n.emphasis),t[0]=255;var s=255&(t[1]&241),m;n.version==1?m=p:n.out_samplerate<16e3?m=F:m=E,n.VBR==Ge.vbr_off&&(m=n.brate);var c;n.free_format?c=0:c=255&16*d.BitrateIndex(m,n.version,n.out_samplerate),n.version==1?(t[1]=255&(s|10),s=255&(t[2]&13),t[2]=255&(c|s)):(t[1]=255&(s|2),s=255&(t[2]&13),t[2]=255&(c|s))}this.getVbrTag=function(n){var t=new VBRTagData,i=0;t.flags=0;var s=n[i+1]>>3&1,m=n[i+2]>>2&3,c=n[i+3]>>6&3,_=n[i+2]>>4&15;if(_=Tables.bitrate_table[s][_],n[i+1]>>4==14?t.samprate=Tables.samplerate_table[2][m]:t.samprate=Tables.samplerate_table[s][m],s!=0?c!=3?i+=32+4:i+=17+4:c!=3?i+=17+4:i+=9+4,!v(n,i))return null;i+=4,t.hId=s;var A=t.flags=x(n,i);if(i+=4,A&j&&(t.frames=x(n,i),i+=4),A&L&&(t.bytes=x(n,i),i+=4),A&V){if(t.toc!=null)for(var N=0;N<I;N++)t.toc[N]=n[i+N];i+=I}t.vbrScale=-1,A&Y&&(t.vbrScale=x(n,i),i+=4),t.headersize=(s+1)*72e3*_/t.samprate,i+=21;var y=n[i+0]<<4;y+=n[i+1]>>4;var S=(n[i+1]&15)<<8;return S+=n[i+2]&255,(y<0||y>3e3)&&(y=-1),(S<0||S>3e3)&&(S=-1),t.encDelay=y,t.encPadding=S,t},this.InitVbrTag=function(n){var t=n.internal_flags,i;n.version==1?i=p:n.out_samplerate<16e3?i=F:i=E,n.VBR==Ge.vbr_off&&(i=n.brate);var s=(n.version+1)*72e3*i/n.out_samplerate,m=t.sideinfo_len+X;if(t.VBR_seek_table.TotalFrameSize=s,s<m||s>k){n.bWriteVbrTag=!1;return}t.VBR_seek_table.nVbrNumFrames=0,t.VBR_seek_table.nBytesWritten=0,t.VBR_seek_table.sum=0,t.VBR_seek_table.seen=0,t.VBR_seek_table.want=1,t.VBR_seek_table.pos=0,t.VBR_seek_table.bag==null&&(t.VBR_seek_table.bag=new int[400],t.VBR_seek_table.size=400);var c=Me(k);o(n,c);for(var _=t.VBR_seek_table.TotalFrameSize,A=0;A<_;++A)T.add_dummy_byte(n,c[A]&255,1)};function r(n,t){var i=t^n;return t=t>>8^_0[i&255],t}this.updateMusicCRC=function(n,t,i,s){for(var m=0;m<s;++m)n[0]=r(t[i+m],n[0])};function a(n,t,i,s,m){var c=n.internal_flags,_=0,A=n.encoder_delay,N=n.encoder_padding,y=100-10*n.VBR_q-n.quality,S=C.getLameVeryShortVersion(),$,q=0,Q,K=[1,5,3,2,4,0,3],i0=0|(n.lowpassfreq/100+.5>255?255:n.lowpassfreq/100+.5),Z=0,f0=0,z0=0,W0=n.internal_flags.noise_shaping,J=0,h0=0,o0=0,ce=0,_e=0,de=(n.exp_nspsytune&1)!=0,ke=(n.exp_nspsytune&2)!=0,fe=!1,he=!1,ve=n.internal_flags.nogap_total,me=n.internal_flags.nogap_current,ue=n.ATHtype,be=0,K0;switch(n.VBR){case vbr_abr:K0=n.VBR_mean_bitrate_kbps;break;case vbr_off:K0=n.brate;break;default:K0=n.VBR_min_bitrate_kbps}switch(n.VBR.ordinal()<K.length?$=K[n.VBR.ordinal()]:$=0,Q=16*q+$,c.findReplayGain&&(c.RadioGain>510&&(c.RadioGain=510),c.RadioGain<-510&&(c.RadioGain=-510),f0=8192,f0|=3072,c.RadioGain>=0?f0|=c.RadioGain:(f0|=512,f0|=-c.RadioGain)),c.findPeakSample&&(Z=Math.abs(0|c.PeakSample/32767*Math.pow(2,23)+.5)),ve!=-1&&(me>0&&(he=!0),me<ve-1&&(fe=!0)),be=ue+((de?1:0)<<4)+((ke?1:0)<<5)+((fe?1:0)<<6)+((he?1:0)<<7),y<0&&(y=0),n.mode){case MONO:J=0;break;case STEREO:J=1;break;case DUAL_CHANNEL:J=2;break;case JOINT_STEREO:n.force_ms?J=4:J=3;break;case NOT_SET:default:J=7;break}n.in_samplerate<=32e3?o0=0:n.in_samplerate==48e3?o0=2:n.in_samplerate>48e3?o0=3:o0=1,(n.short_blocks==n1.short_block_forced||n.short_blocks==n1.short_block_dispensed||n.lowpassfreq==-1&&n.highpassfreq==-1||n.scale_left<n.scale_right||n.scale_left>n.scale_right||n.disable_reservoir&&n.brate<320||n.noATH||n.ATHonly||ue==0||n.in_samplerate<=32e3)&&(h0=1),ce=W0+(J<<2)+(h0<<5)+(o0<<6),_e=c.nMusicCRC,e(i,s+_,y),_+=4;for(var R=0;R<9;R++)i[s+_+R]=255&S.charAt(R);_+=9,i[s+_]=255&Q,_++,i[s+_]=255&i0,_++,e(i,s+_,Z),_+=4,f(i,s+_,f0),_+=2,f(i,s+_,z0),_+=2,i[s+_]=255&be,_++,K0>=255?i[s+_]=255:i[s+_]=255&K0,_++,i[s+_]=255&A>>4,i[s+_+1]=255&(A<<4)+(N>>8),i[s+_+2]=255&N,_+=3,i[s+_]=255&ce,_++,i[s+_++]=0,f(i,s+_,n.preset),_+=2,e(i,s+_,t),_+=4,f(i,s+_,_e),_+=2;for(var g=0;g<_;g++)m=r(i[s+g],m);return f(i,s+_,m),_+=2,_}function l(n){n.seek(0);var t=Me(10);n.readFully(t);var i;return new String(t,"ISO-8859-1").startsWith("ID3")?i=0:i=((t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127)+t.length,i}this.getLameTagFrame=function(n,t){var i=n.internal_flags;if(!n.bWriteVbrTag||i.Class_ID!=Lame.LAME_ID||i.VBR_seek_table.pos<=0)return 0;if(t.length<i.VBR_seek_table.TotalFrameSize)return i.VBR_seek_table.TotalFrameSize;kt.fill(t,0,i.VBR_seek_table.TotalFrameSize,0),o(n,t);var s=Me(I);if(n.free_format)for(var m=1;m<I;++m)s[m]=255&255*m/100;else u(i.VBR_seek_table,s);var c=i.sideinfo_len;n.error_protection&&(c-=2),n.VBR==Ge.vbr_off?(t[c++]=255&O.charAt(0),t[c++]=255&O.charAt(1),t[c++]=255&O.charAt(2),t[c++]=255&O.charAt(3)):(t[c++]=255&M.charAt(0),t[c++]=255&M.charAt(1),t[c++]=255&M.charAt(2),t[c++]=255&M.charAt(3)),e(t,c,j+L+V+Y),c+=4,e(t,c,i.VBR_seek_table.nVbrNumFrames),c+=4;var _=i.VBR_seek_table.nBytesWritten+i.VBR_seek_table.TotalFrameSize;e(t,c,0|_),c+=4,Ct.arraycopy(s,0,t,c,s.length),c+=s.length,n.error_protection&&T.CRC_writeheader(i,t);for(var A=0,m=0;m<c;m++)A=r(t[m],A);return c+=a(n,_,t,c,A),i.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(n,t){var i=n.internal_flags;if(i.VBR_seek_table.pos<=0||(t.seek(t.length()),t.length()==0))return-1;var s=l(t);t.seek(s);var m=Me(k),c=getLameTagFrame(n,m);return c>m.length?-1:(c<1||t.write(m,0,c),0)}}var g0=n0;g0.System;g0.VbrMode;g0.Float;g0.ShortBlock;g0.Util;g0.Arrays;g0.new_array_n;g0.new_byte;g0.new_double;g0.new_float;g0.new_float_n;g0.new_int;g0.new_int_n;g0.assert;d0();function G0(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Ce(d){return d.charCodeAt(0)<<24|d.charCodeAt(1)<<16|d.charCodeAt(2)<<8|d.charCodeAt(3)}G0.RIFF=Ce("RIFF");G0.WAVE=Ce("WAVE");G0.fmt_=Ce("fmt ");G0.data=Ce("data");G0.readHeader=function(d){var T=new G0,C=d.getUint32(0,!1);if(G0.RIFF==C&&(d.getUint32(4,!0),G0.WAVE==d.getUint32(8,!1)&&G0.fmt_==d.getUint32(12,!1))){var j=d.getUint32(16,!0),L=16+4;switch(j){case 16:case 18:T.channels=d.getUint16(L+2,!0),T.sampleRate=d.getUint32(L+4,!0);break;default:throw"extended fmt chunk not implemented"}L+=j;for(var V=G0.data,Y=0;V!=C&&(C=d.getUint32(L,!1),Y=d.getUint32(L+4,!0),V!=C);)L+=Y+8;return T.dataLen=Y,T.dataOffset=L+8,T}};const It=()=>{const[d,T]=z.useState(!1),[C,j]=z.useState("C"),[L,V]=z.useState("piano"),[Y,I]=z.useState(new Set);z.useState("major");const[k,H]=z.useState({attack:.02,decay:.3,sustain:.4,release:1.2,volume:-6,detune:0,filterCutoff:3e3,filterResonance:.5,oscillatorType:"triangle"}),[X,p]=z.useState(!1),[E,F]=z.useState(120),[G,M]=z.useState("4/4"),[O,_0]=z.useState(!0),[w,u]=z.useState(0),[x,e]=z.useState({reverb:!1,delay:!1,tremolo:!1,flanger:!1,sidechain:!1,eq:!1}),[f,v]=z.useState({low:0,lowMid:0,mid:0,highMid:0,high:0}),[b,o]=z.useState({threshold:-20,ratio:4,attack:.01,release:.1,speed:"quarter"});z.useState("chord");const[r,a]=z.useState(null),[l,n]=z.useState(null),[t,i]=z.useState(new Set),[s,m]=z.useState(!1),[c,_]=z.useState(null),[A,N]=z.useState(null),[y,S]=z.useState(0),[$,q]=z.useState(null),[Q,K]=z.useState([]);z.useState(null);const i0={piano:{name:"Piano",icon:"",waveform:"triangle",adsr:{attack:.01,decay:.3,sustain:.3,release:1.5},filterCutoff:3e3,effects:{reverb:!0,delay:!1},detune:0,volume:-6},synth:{name:"Synth",icon:"",waveform:"sawtooth",adsr:{attack:.1,decay:.3,sustain:.7,release:.8},filterCutoff:1200,effects:{reverb:!1,delay:!0},detune:0,volume:-3},bass:{name:"Bass",icon:"",waveform:"square",adsr:{attack:.05,decay:.2,sustain:.8,release:.4},filterCutoff:300,effects:{reverb:!1,delay:!1},detune:0,volume:-2},pad:{name:"Pad",icon:"",waveform:"sine",adsr:{attack:2,decay:1.5,sustain:.9,release:3},filterCutoff:600,effects:{reverb:!0,delay:!0},detune:0,volume:-8},lead:{name:"Lead",icon:"",waveform:"sawtooth",adsr:{attack:.02,decay:.1,sustain:.9,release:.3},filterCutoff:2e3,effects:{reverb:!0,delay:!1},detune:0,volume:-4},organ:{name:"Organ",icon:"",waveform:"square",adsr:{attack:0,decay:0,sustain:1,release:.05},filterCutoff:1500,effects:{reverb:!0,delay:!1},detune:0,volume:-5},strings:{name:"Strings",icon:"",waveform:"triangle",adsr:{attack:.5,decay:1,sustain:.8,release:2.5},filterCutoff:2500,effects:{reverb:!0,delay:!1},detune:0,volume:-7},brass:{name:"Brass",icon:"",waveform:"sawtooth",adsr:{attack:.1,decay:.4,sustain:.7,release:.8},filterCutoff:1800,effects:{reverb:!0,delay:!1},detune:0,volume:-4},choir:{name:"Choir",icon:"",waveform:"sine",adsr:{attack:.3,decay:.8,sustain:.9,release:2},filterCutoff:1200,effects:{reverb:!0,delay:!0},detune:0,volume:-6},bell:{name:"Bell",icon:"",waveform:"triangle",adsr:{attack:0,decay:.1,sustain:.1,release:3},filterCutoff:4e3,effects:{reverb:!0,delay:!1},detune:0,volume:-8},pluck:{name:"Pluck",icon:"",waveform:"triangle",adsr:{attack:0,decay:.05,sustain:0,release:.3},filterCutoff:2e3,effects:{reverb:!1,delay:!0},detune:0,volume:-3},ambient:{name:"Ambient",icon:"",waveform:"sine",adsr:{attack:3,decay:2,sustain:.9,release:5},filterCutoff:800,effects:{reverb:!0,delay:!0},detune:0,volume:-10}},Z={C:{I:{name:"C",notes:["C4","E4","G4"],type:"major"},ii:{name:"Dm",notes:["D4","F4","A4"],type:"minor"},iii:{name:"Em",notes:["E4","G4","B4"],type:"minor"},IV:{name:"F",notes:["F4","A4","C5"],type:"major"},V:{name:"G",notes:["G4","B4","D5"],type:"major"},vi:{name:"Am",notes:["A4","C5","E5"],type:"minor"},"vii":{name:"B",notes:["B4","D5","F5"],type:"diminished"}},G:{I:{name:"G",notes:["G3","B3","D4"],type:"major"},ii:{name:"Am",notes:["A3","C4","E4"],type:"minor"},iii:{name:"Bm",notes:["B3","D4","F#4"],type:"minor"},IV:{name:"C",notes:["C4","E4","G4"],type:"major"},V:{name:"D",notes:["D4","F#4","A4"],type:"major"},vi:{name:"Em",notes:["E4","G4","B4"],type:"minor"},"vii":{name:"F#",notes:["F#4","A4","C5"],type:"diminished"}},D:{I:{name:"D",notes:["D3","F#3","A3"],type:"major"},ii:{name:"Em",notes:["E3","G3","B3"],type:"minor"},iii:{name:"F#m",notes:["F#3","A3","C#4"],type:"minor"},IV:{name:"G",notes:["G3","B3","D4"],type:"major"},V:{name:"A",notes:["A3","C#4","E4"],type:"major"},vi:{name:"Bm",notes:["B3","D4","F#4"],type:"minor"},"vii":{name:"C#",notes:["C#4","E4","G4"],type:"diminished"}},A:{I:{name:"A",notes:["A3","C#4","E4"],type:"major"},ii:{name:"Bm",notes:["B3","D4","F#4"],type:"minor"},iii:{name:"C#m",notes:["C#4","E4","G#4"],type:"minor"},IV:{name:"D",notes:["D4","F#4","A4"],type:"major"},V:{name:"E",notes:["E4","G#4","B4"],type:"major"},vi:{name:"F#m",notes:["F#4","A4","C#5"],type:"minor"},"vii":{name:"G#",notes:["G#4","B4","D5"],type:"diminished"}},E:{I:{name:"E",notes:["E3","G#3","B3"],type:"major"},ii:{name:"F#m",notes:["F#3","A3","C#4"],type:"minor"},iii:{name:"G#m",notes:["G#3","B3","D#4"],type:"minor"},IV:{name:"A",notes:["A3","C#4","E4"],type:"major"},V:{name:"B",notes:["B3","D#4","F#4"],type:"major"},vi:{name:"C#m",notes:["C#4","E4","G#4"],type:"minor"},"vii":{name:"D#",notes:["D#4","F#4","A4"],type:"diminished"}},F:{I:{name:"F",notes:["F3","A3","C4"],type:"major"},ii:{name:"Gm",notes:["G3","Bb3","D4"],type:"minor"},iii:{name:"Am",notes:["A3","C4","E4"],type:"minor"},IV:{name:"Bb",notes:["Bb3","D4","F4"],type:"major"},V:{name:"C",notes:["C4","E4","G4"],type:"major"},vi:{name:"Dm",notes:["D4","F4","A4"],type:"minor"},"vii":{name:"E",notes:["E4","G4","Bb4"],type:"diminished"}}};z.useEffect(()=>{(async()=>{try{await le(),console.log("Tone.js initialized");const g=new N1(T1,{oscillator:{type:"triangle",detune:0},envelope:{attack:.01,decay:.3,sustain:.3,release:1.5},volume:-6}),D=new B1(3e3,"lowpass"),P=new C1({decay:2,wet:.3}),e0=new k1({delayTime:"8n",feedback:.2,wet:.2}),t0=new j1({frequency:4,depth:.5,wet:.3}),Q0=new I1({delayTime:"8n",feedback:.3,wet:.2}),P0=new g1({low:0,mid:0,high:0}),re=new F1({threshold:-20,ratio:4,attack:.01,release:.1}),xe=new O1(1),qe=new L1({frequency:1,type:"sine",min:.3,max:1});qe.connect(xe.gain);const S1={filter:D,reverb:P,delay:e0,tremolo:t0,flanger:Q0,eq:P0,sidechain:re,sidechainDuck:xe,sidechainLFO:qe};g.connect(D),D.connect(P0),P0.connect(re),re.connect(xe),xe.connect(t0),t0.connect(Q0),Q0.connect(P),P.connect(e0),e0.toDestination(),g.effectsChain=S1,a(g),T(!0);const A1=new H1;_(A1)}catch(g){console.error("Failed to initialize synthesizer:",g)}})()},[]),z.useEffect(()=>{if(d){const R=parseInt(G.split("/")[0]),g=new M1(D=>{const P=Math.floor(pe.position.split(":")[1])%R;u(P),P===0&&O?new je(1e3,"sine").toDestination().start(D).stop(D+.15):new je(800,"sine").toDestination().start(D).stop(D+.1)},"4n");n(g)}},[d,G,O]);const f0=async R=>{if(!r||!d)return;se.state!=="running"&&await le();const g=Z[C][R];g&&(Y.has(R)||(console.log("Triggering chord:",R,g.notes),console.log("Synth state:",r),console.log("Audio context state:",se.state),I(D=>new Set([...D,R])),g.notes.forEach(D=>{console.log("Playing note:",D),r.triggerAttack(D),i(P=>new Set([...P,D]))})))},z0=R=>{if(!r||!d)return;const g=Z[C][R];g&&Y.has(R)&&(console.log("Releasing chord:",R,g.notes),I(D=>{const P=new Set(D);return P.delete(R),P}),g.notes.forEach(D=>{r.triggerRelease(D),i(P=>{const e0=new Set(P);return e0.delete(D),e0})}))},[W0,J]=z.useState(new Set);z.useEffect(()=>{const R={1:"I",2:"ii",3:"iii",4:"IV",5:"V",6:"vi",7:"vii"},g=e0=>{const t0=e0.key;if(t0==="Escape"){e0.preventDefault(),h0();return}if(R[t0]&&!W0.has(t0)){e0.preventDefault();const Q0=R[t0];J(P0=>new Set([...P0,t0])),f0(Q0)}},D=e0=>{const t0=e0.key;if(R[t0]&&W0.has(t0)){e0.preventDefault();const Q0=R[t0];console.log("Key up:",t0,"chord:",Q0,"active chords:",Array.from(Y)),J(P0=>{const re=new Set(P0);return re.delete(t0),re}),z0(Q0)}},P=()=>{console.log("Window lost focus - stopping all notes"),h0()};return window.addEventListener("keydown",g),window.addEventListener("keyup",D),window.addEventListener("blur",P),()=>{window.removeEventListener("keydown",g),window.removeEventListener("keyup",D),window.removeEventListener("blur",P)}},[r,d,C,Y,W0]);const h0=()=>{if(r&&d)try{console.log("Emergency stop - releasing all notes"),r.releaseAll(),I(new Set),i(new Set),J(new Set),console.log("All notes stopped")}catch(R){console.error("Error stopping notes:",R)}},o0=()=>{l&&(X?(l.stop(),pe.stop()):(pe.bpm.value=E,l.start(),pe.start()),p(!X))},ce=async()=>{try{console.log("Starting recording..."),se.state!=="running"&&(await le(),console.log("Audio context started"));const g=se.createMediaStreamDestination();r.connect(g),console.log("Synth connected to destination");let D="audio/mp3";MediaRecorder.isTypeSupported("audio/mp3")||(D="audio/webm;codecs=opus",console.log("MP3 not supported, using WebM with Opus"));const P=new MediaRecorder(g.stream,{mimeType:D}),e0=[];P.ondataavailable=t0=>{console.log("Data available:",t0.data.size,"bytes"),t0.data.size>0&&e0.push(t0.data)},P.onstop=()=>{console.log("Recording stopped, processing chunks:",e0.length);const t0=new Blob(e0,{type:D});N(t0),m(!1),console.log("Recording complete - MP3 file created:",t0.size,"bytes")},P.onerror=t0=>{console.error("MediaRecorder error:",t0.error),m(!1)},P.start(1e3),q(P),K(e0),m(!0),S(0),N(null),console.log("Recording started successfully - MP3 unlimited length")}catch(R){console.error("Failed to start recording:",R),m(!1)}},_e=async()=>{if(!(!$||!s))try{console.log("Stopping recording..."),$.stop(),r.disconnect(),console.log("Recording stopped - processing MP3 file")}catch(R){console.error("Failed to stop recording:",R),m(!1)}},de=()=>{if(!A)return;console.log("Exporting audio file...");const R=URL.createObjectURL(A),g=document.createElement("a");g.href=R;const D=A.type==="audio/mp3",P=D?"mp3":"webm",e0=D?"MP3":"WebM";g.download=`chordmaster-masterpiece-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.${P}`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(R),console.log(`${e0} export complete`)},ke=async()=>{if(A)try{console.log("Exporting audio file...");const R=URL.createObjectURL(A),g=document.createElement("a");g.href=R;const D=A.type==="audio/mp3",P=D?"mp3":"webm",e0=D?"MP3":"WebM";g.download=`chordmaster-masterpiece-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.${P}`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(R),console.log(`${e0} export complete`)}catch(R){console.error("Failed to export audio:",R),de()}};z.useEffect(()=>{let R=null;return s?R=setInterval(()=>{S(g=>g+1)},1e3):clearInterval(R),()=>clearInterval(R)},[s]);const fe=R=>{const g=i0[R];!g||!r||(r.set({oscillator:{type:g.waveform,detune:g.detune||0},envelope:g.adsr,volume:g.volume||0}),H({attack:g.adsr.attack,decay:g.adsr.decay,sustain:g.adsr.sustain,release:g.adsr.release,volume:g.volume||0,detune:g.detune||0,filterCutoff:g.filterCutoff||3e3,filterResonance:.5,oscillatorType:g.waveform}),V(R),console.log(`Switched to ${g.name} instrument`))},he=()=>{!r||!d||(r.set({oscillator:{type:k.oscillatorType,detune:k.detune},envelope:{attack:k.attack,decay:k.decay,sustain:k.sustain,release:k.release},volume:k.volume}),r.effectsChain&&r.effectsChain.filter&&r.effectsChain.filter.set({frequency:k.filterCutoff,Q:k.filterResonance,type:"lowpass"}))},ve=()=>{if(!r||!r.effectsChain)return;const{sidechain:R,sidechainLFO:g}=r.effectsChain;R.set({threshold:b.threshold,ratio:b.ratio,attack:b.attack,release:b.release});let D;switch(b.speed){case"whole":D=E/60/1;break;case"half":D=E/60/2;break;case"quarter":D=E/60/4;break;case"eighth":D=E/60/8;break;case"sixteenth":D=E/60/16;break;default:D=E/60/4}g.set({frequency:D,min:.2,max:1})},me=()=>{if(!r||!r.effectsChain)return;const{eq:R}=r.effectsChain;R.set({low:f.low,mid:f.mid,high:f.high})};z.useEffect(()=>{x.sidechain?(ve(),r&&r.effectsChain&&r.effectsChain.sidechainLFO.start()):r&&r.effectsChain&&r.effectsChain.sidechainLFO.stop()},[b,x.sidechain,E]),z.useEffect(()=>{x.eq&&me()},[f,x.eq]),z.useEffect(()=>{r&&d&&he()},[k,r,d]);const ue=R=>{r&&d&&Y.size>0&&r.releaseAll(),j(R),I(new Set),i(new Set),J(new Set)};z.useEffect(()=>()=>{r&&d&&r.releaseAll()},[r,d]);const be=async()=>{se.state!=="running"&&(await le(),console.log("Audio context started by user interaction"))},K0=async()=>{se.state!=="running"&&await le(),new je(440,"sine").toDestination().start().stop("+0.5"),console.log("Test audio played")};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white",onClick:be,children:[h.jsx("header",{className:"bg-gradient-to-r from-purple-800 to-blue-800 border-b border-purple-600 p-6",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"text-4xl",children:""}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-white",children:"ChordMaster"}),h.jsx("div",{className:"text-sm text-purple-200",children:"Smart Chord Synthesizer"})]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-3 bg-white/10 rounded-full px-4 py-2",children:[h.jsx("div",{className:`w-3 h-3 rounded-full ${d?"bg-green-400 animate-pulse":"bg-red-400"}`}),h.jsx("span",{className:"text-sm font-medium",children:d?"System Ready":"Initializing..."})]}),d&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:h0,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg",children:" Stop All"}),h.jsx("button",{onClick:K0,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg",children:" Test Audio"})]})]})]})}),h.jsx("div",{className:"max-w-7xl mx-auto p-8",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-gradient-to-br from-purple-800/30 to-blue-800/30 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/30 shadow-2xl",children:[h.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[h.jsx("span",{className:"text-2xl mr-3",children:""}),"Sound Palette"]}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(i0).map(([R,g])=>h.jsx("button",{onClick:()=>fe(R),className:`p-4 rounded-xl border-2 transition-all duration-300 transform hover:scale-105 ${L===R?"border-purple-400 bg-purple-400/20 text-purple-300 shadow-lg shadow-purple-500/25":"border-purple-600/50 bg-purple-900/20 hover:border-purple-500 hover:bg-purple-800/30"}`,children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl mb-2",children:g.icon}),h.jsx("div",{className:"text-sm font-semibold",children:g.name})]})},R))})]}),h.jsxs("div",{className:"bg-gradient-to-br from-indigo-800/30 to-purple-800/30 backdrop-blur-sm rounded-2xl p-6 border border-indigo-500/30 shadow-2xl",children:[h.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[h.jsx("span",{className:"text-2xl mr-3",children:""}),"Instrument Controls"]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-indigo-200 font-semibold",children:"ADSR Envelope"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Attack"}),h.jsxs("span",{children:[k.attack.toFixed(2),"s"]})]}),h.jsx("input",{type:"range",min:"0.001",max:"2",step:"0.01",value:k.attack,onChange:R=>H(g=>({...g,attack:parseFloat(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Decay"}),h.jsxs("span",{children:[k.decay.toFixed(2),"s"]})]}),h.jsx("input",{type:"range",min:"0.01",max:"2",step:"0.01",value:k.decay,onChange:R=>H(g=>({...g,decay:parseFloat(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Sustain"}),h.jsx("span",{children:k.sustain.toFixed(2)})]}),h.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:k.sustain,onChange:R=>H(g=>({...g,sustain:parseFloat(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Release"}),h.jsxs("span",{children:[k.release.toFixed(2),"s"]})]}),h.jsx("input",{type:"range",min:"0.01",max:"5",step:"0.01",value:k.release,onChange:R=>H(g=>({...g,release:parseFloat(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-indigo-200 font-semibold",children:"Oscillator"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-xs text-indigo-300",children:"Waveform"}),h.jsxs("select",{value:k.oscillatorType,onChange:R=>H(g=>({...g,oscillatorType:R.target.value})),className:"w-full p-2 rounded-lg bg-indigo-900/30 text-indigo-300 border border-indigo-600/50",children:[h.jsx("option",{value:"sine",children:"Sine"}),h.jsx("option",{value:"triangle",children:"Triangle"}),h.jsx("option",{value:"sawtooth",children:"Sawtooth"}),h.jsx("option",{value:"square",children:"Square"}),h.jsx("option",{value:"fatsawtooth",children:"Fat Sawtooth"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Detune"}),h.jsxs("span",{children:[k.detune,""]})]}),h.jsx("input",{type:"range",min:"-100",max:"100",value:k.detune,onChange:R=>H(g=>({...g,detune:parseInt(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-indigo-200 font-semibold",children:"Filter"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Cutoff"}),h.jsxs("span",{children:[k.filterCutoff,"Hz"]})]}),h.jsx("input",{type:"range",min:"100",max:"8000",value:k.filterCutoff,onChange:R=>H(g=>({...g,filterCutoff:parseInt(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Resonance"}),h.jsx("span",{children:k.filterResonance.toFixed(1)})]}),h.jsx("input",{type:"range",min:"0",max:"10",step:"0.1",value:k.filterResonance,onChange:R=>H(g=>({...g,filterResonance:parseFloat(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs text-indigo-300",children:[h.jsx("span",{children:"Volume"}),h.jsxs("span",{children:[k.volume,"dB"]})]}),h.jsx("input",{type:"range",min:"-30",max:"0",value:k.volume,onChange:R=>H(g=>({...g,volume:parseInt(R.target.value)})),className:"w-full h-1 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer"})]})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-800/30 to-indigo-800/30 backdrop-blur-sm rounded-2xl p-6 border border-blue-500/30 shadow-2xl",children:[h.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[h.jsx("span",{className:"text-2xl mr-3",children:""}),"Musical Key"]}),h.jsx("div",{className:"grid grid-cols-3 gap-3",children:["C","G","D","A","E","F"].map(R=>h.jsx("button",{onClick:()=>ue(R),className:`p-4 rounded-xl border-2 font-mono text-xl font-bold transition-all duration-300 transform hover:scale-105 ${C===R?"border-blue-400 bg-blue-400/20 text-blue-300 shadow-lg shadow-blue-500/25":"border-blue-600/50 bg-blue-900/20 hover:border-blue-500 hover:bg-blue-800/30"}`,children:R},R))})]}),h.jsxs("div",{className:"bg-gradient-to-br from-green-800/30 to-emerald-800/30 backdrop-blur-sm rounded-2xl p-6 border border-green-500/30 shadow-2xl",children:[h.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[h.jsx("span",{className:"text-2xl mr-3",children:""}),"Rhythm Engine"]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"flex justify-center space-x-2 mb-4",children:[1,2,3,4].map(R=>h.jsx("div",{className:`w-8 h-8 rounded-full border-2 transition-all duration-200 ${X&&w===R-1?"bg-green-400 border-green-300 scale-125":R===1?"border-green-400 bg-green-400/20":"border-green-600 bg-green-900/20"}`,children:h.jsx("div",{className:"flex items-center justify-center h-full text-xs font-bold",children:R===1?"":""})},R))}),X&&h.jsxs("div",{className:"text-center text-green-300 font-mono text-lg",children:["Beat ",w+1," of ",G]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx("button",{onClick:o0,className:`w-full p-4 rounded-xl border-2 font-semibold text-lg transition-all duration-300 transform hover:scale-105 ${X?"border-green-400 bg-green-400/20 text-green-300 shadow-lg shadow-green-500/25":"border-green-600/50 bg-green-900/20 hover:border-green-500 hover:bg-green-800/30"}`,children:X?" Stop Beat":" Start Beat"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsxs("label",{className:"text-sm text-green-200 font-medium",children:["Tempo: ",E," BPM"]}),h.jsx("input",{type:"range",min:"60",max:"200",value:E,onChange:R=>F(parseInt(R.target.value)),className:"w-full h-2 bg-green-900/50 rounded-lg appearance-none cursor-pointer slider"}),h.jsxs("div",{className:"flex justify-between text-xs text-green-300",children:[h.jsx("span",{children:"60"}),h.jsx("span",{children:"200"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm text-green-200 font-medium",children:"Time Signature"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["4/4","3/4","2/4","6/8"].map(R=>h.jsx("button",{onClick:()=>M(R),className:`p-2 rounded-lg border text-sm transition-all ${G===R?"border-green-400 bg-green-400/20 text-green-300":"border-green-600/50 bg-green-900/20 hover:border-green-500"}`,children:R},R))})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-green-200",children:"Accent Beat 1"}),h.jsx("button",{onClick:()=>_0(!O),className:`w-12 h-6 rounded-full transition-all ${O?"bg-green-400":"bg-gray-600"}`,children:h.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${O?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]}),h.jsx("div",{className:"lg:col-span-2",children:h.jsxs("div",{className:"bg-gradient-to-br from-indigo-800/30 to-purple-800/30 backdrop-blur-sm rounded-2xl p-8 border border-indigo-500/30 shadow-2xl",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsxs("h2",{className:"text-3xl font-bold text-white mb-3 flex items-center justify-center",children:[h.jsx("span",{className:"text-4xl mr-4",children:""}),"Chord Matrix"]}),h.jsxs("p",{className:"text-indigo-200 text-lg",children:["Key of ",h.jsx("span",{className:"font-mono text-indigo-300 text-xl font-bold",children:C})]}),h.jsx("p",{className:"text-indigo-300/70 text-sm mt-2",children:"Press number keys 1-7 or click buttons  Hold multiple keys for polyphonic chords  ESC to stop all"})]}),h.jsx("div",{className:"grid grid-cols-4 gap-6",children:[{number:"I",label:"1",description:"Tonic",color:"from-red-500 to-pink-500"},{number:"ii",label:"2",description:"Supertonic",color:"from-orange-500 to-red-500"},{number:"iii",label:"3",description:"Mediant",color:"from-yellow-500 to-orange-500"},{number:"IV",label:"4",description:"Subdominant",color:"from-green-500 to-yellow-500"},{number:"V",label:"5",description:"Dominant",color:"from-blue-500 to-green-500"},{number:"vi",label:"6",description:"Submediant",color:"from-indigo-500 to-blue-500"},{number:"vii",label:"7",description:"Leading Tone",color:"from-purple-500 to-indigo-500"}].map(R=>{const g=Z[C][R.number],D=Y.has(R.number);return h.jsx("button",{onMouseDown:()=>f0(R.number),onMouseUp:()=>z0(R.number),onMouseLeave:()=>z0(R.number),className:`p-6 rounded-2xl border-2 transition-all duration-300 transform hover:scale-105 ${D?`border-white bg-gradient-to-br ${R.color} text-white shadow-2xl shadow-white/25`:"border-indigo-600/50 bg-indigo-900/20 hover:border-indigo-500 hover:bg-indigo-800/30"}`,children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-4xl font-bold mb-3",children:R.label}),h.jsx("div",{className:"text-lg font-mono font-semibold",children:g.name}),h.jsx("div",{className:"text-sm text-indigo-200 mt-1",children:R.description})]})},R.number)})})]})}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-gradient-to-br from-gray-900/50 to-black/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-600/30 shadow-2xl",children:[h.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[h.jsx("span",{className:"text-2xl mr-3",children:""}),"Smart Display"]}),h.jsxs("div",{className:"bg-black rounded-xl p-6 font-mono text-sm border border-gray-700",children:[h.jsx("div",{className:"text-green-400 mb-3 text-lg font-bold",children:"ChordMaster v2.0"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"text-blue-400",children:["Key: ",h.jsx("span",{className:"text-white",children:C})]}),h.jsxs("div",{className:"text-purple-400",children:["Sound: ",h.jsx("span",{className:"text-white",children:i0[L].name})]}),Y.size>0&&h.jsxs("div",{className:"text-yellow-400",children:["Chords: ",h.jsx("span",{className:"text-white",children:Array.from(Y).map(R=>Z[C][R].name).join(", ")})]}),X&&h.jsxs("div",{className:"text-red-400",children:["Beat: ",h.jsxs("span",{className:"text-white",children:[E," BPM"]})]}),s&&h.jsxs("div",{className:"text-orange-400",children:["Recording: ",h.jsxs("span",{className:"text-white",children:[Math.floor(y/60),":",(y%60).toString().padStart(2,"0")]})]}),h.jsxs("div",{className:"text-gray-400 mt-3 text-xs",children:["Active Notes: ",t.size]})]})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-pink-800/30 to-rose-800/30 backdrop-blur-sm rounded-2xl p-6 border border-pink-500/30 shadow-2xl",children:[h.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[h.jsx("span",{className:"text-2xl mr-3",children:""}),"Sound Effects"]}),h.jsx("div",{className:"space-y-4 mb-6",children:Object.entries(x).map(([R,g])=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[h.jsx("span",{className:"text-sm capitalize text-pink-200 font-medium",children:R}),h.jsx("button",{onClick:()=>e(D=>({...D,[R]:!g})),className:`w-14 h-7 rounded-full transition-all duration-300 ${g?"bg-pink-400":"bg-gray-600"}`,children:h.jsx("div",{className:`w-6 h-6 bg-white rounded-full transition-transform duration-300 ${g?"translate-x-7":"translate-x-1"}`})})]},R))}),x.eq&&h.jsxs("div",{className:"mb-6 p-4 bg-white/5 rounded-xl",children:[h.jsx("h3",{className:"text-pink-200 font-semibold mb-3",children:"EQ"}),h.jsx("div",{className:"space-y-3",children:Object.entries(f).map(([R,g])=>h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex justify-between text-xs text-pink-300",children:[h.jsx("span",{children:R}),h.jsxs("span",{children:[g,"dB"]})]}),h.jsx("input",{type:"range",min:"-12",max:"12",value:g,onChange:D=>v(P=>({...P,[R]:parseInt(D.target.value)})),className:"w-full h-1 bg-pink-900/50 rounded-lg appearance-none cursor-pointer"})]},R))})]}),x.sidechain&&h.jsxs("div",{className:"p-4 bg-white/5 rounded-xl",children:[h.jsx("h3",{className:"text-pink-200 font-semibold mb-3",children:"Sidechain"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex justify-between text-xs text-pink-300",children:[h.jsx("span",{children:"Threshold"}),h.jsxs("span",{children:[b.threshold,"dB"]})]}),h.jsx("input",{type:"range",min:"-40",max:"0",value:b.threshold,onChange:R=>o(g=>({...g,threshold:parseInt(R.target.value)})),className:"w-full h-1 bg-pink-900/50 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex justify-between text-xs text-pink-300",children:[h.jsx("span",{children:"Ratio"}),h.jsxs("span",{children:[b.ratio,":1"]})]}),h.jsx("input",{type:"range",min:"1",max:"20",value:b.ratio,onChange:R=>o(g=>({...g,ratio:parseInt(R.target.value)})),className:"w-full h-1 bg-pink-900/50 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-xs text-pink-300",children:"Speed"}),h.jsx("div",{className:"grid grid-cols-5 gap-1",children:[{value:"whole",label:"",name:"Whole"},{value:"half",label:"",name:"Half"},{value:"quarter",label:"",name:"Quarter"},{value:"eighth",label:"",name:"Eighth"},{value:"sixteenth",label:"",name:"16th"}].map(R=>h.jsxs("button",{onClick:()=>o(g=>({...g,speed:R.value})),className:`p-2 rounded-lg text-xs transition-all duration-300 ${b.speed===R.value?"bg-pink-500 text-white shadow-lg":"bg-pink-900/30 text-pink-300 hover:bg-pink-800/50"}`,title:R.name,children:[h.jsx("div",{className:"text-lg",children:R.label}),h.jsx("div",{className:"text-xs",children:R.name})]},R.value))})]})]})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-orange-800/30 to-red-800/30 backdrop-blur-sm rounded-2xl p-6 border border-orange-500/30 shadow-2xl",children:[h.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[h.jsx("span",{className:"text-2xl mr-3",children:""}),"Recording Studio"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"text-center",children:s?h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-red-400 font-semibold",children:"RECORDING"})]}),h.jsxs("div",{className:"text-orange-200 font-mono text-lg",children:[Math.floor(y/60),":",(y%60).toString().padStart(2,"0")]})]}):h.jsx("div",{className:"text-orange-200",children:"Ready to Record"})}),h.jsx("div",{className:"space-y-3",children:s?h.jsx("button",{onClick:_e,className:"w-full p-3 rounded-xl border-2 border-orange-500 bg-orange-500/20 text-orange-300 hover:bg-orange-500/30 transition-all duration-300 transform hover:scale-105",children:" Stop Recording"}):h.jsx("button",{onClick:ce,className:"w-full p-3 rounded-xl border-2 border-red-500 bg-red-500/20 text-red-300 hover:bg-red-500/30 transition-all duration-300 transform hover:scale-105",children:" Start Recording"})}),A&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-orange-200 text-sm text-center mb-3",children:" Masterpiece Complete! "}),h.jsxs("div",{className:"text-orange-300 text-xs text-center mb-3",children:["File size: ",(A.size/1024/1024).toFixed(2)," MB"]}),h.jsx("div",{className:"text-orange-200 text-sm text-center mb-3",children:"Export your masterpiece as:"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("button",{onClick:de,className:"p-2 rounded-lg border border-orange-600/50 bg-orange-900/20 hover:bg-orange-800/30 text-orange-200 text-sm transition-all duration-300",children:[" ",(A==null?void 0:A.type)==="audio/mp3"?"MP3 (Professional)":"WebM (High Quality)"]}),h.jsxs("button",{onClick:ke,className:"p-2 rounded-lg border border-orange-600/50 bg-orange-900/20 hover:bg-orange-800/30 text-orange-200 text-sm transition-all duration-300",children:[" ",(A==null?void 0:A.type)==="audio/mp3"?"MP3 (Compressed)":"WebM (Compressed)"]})]})]})]})]})]})]})})]})};function gt(){return h.jsx(It,{})}$e.createRoot(document.getElementById("root")).render(h.jsx(R1.StrictMode,{children:h.jsx(gt,{})}));
