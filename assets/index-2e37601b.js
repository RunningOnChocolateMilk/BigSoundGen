import{r as l,a as ne,R as ie}from"./vendor-b1791c80.js";import{T as p,P as le,S as oe,R as ce,a as de,F as xe,E as me,C as ue,M as ge,N as $,b as he,c as pe}from"./tone-86aedd5b.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))x(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&x(h)}).observe(document,{childList:!0,subtree:!0});function u(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function x(n){if(n.ep)return;n.ep=!0;const o=u(n);fetch(n.href,o)}})();var V={exports:{}},w={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=l,fe=Symbol.for("react.element"),be=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,je=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ne={key:!0,ref:!0,__self:!0,__source:!0};function G(y,c,u){var x,n={},o=null,h=null;u!==void 0&&(o=""+u),c.key!==void 0&&(o=""+c.key),c.ref!==void 0&&(h=c.ref);for(x in c)ve.call(c,x)&&!Ne.hasOwnProperty(x)&&(n[x]=c[x]);if(y&&y.defaultProps)for(x in c=y.defaultProps,c)n[x]===void 0&&(n[x]=c[x]);return{$$typeof:fe,type:y,key:o,ref:h,props:n,_owner:je.current}}w.Fragment=be;w.jsx=G;w.jsxs=G;V.exports=w;var e=V.exports,R={},K=ne;R.createRoot=K.createRoot,R.hydrateRoot=K.hydrateRoot;const we=()=>{const[y,c]=l.useState(!1),[u,x]=l.useState("C"),[n,o]=l.useState("piano"),[h,S]=l.useState(new Set),[q,b]=l.useState(new Set),[m,U]=l.useState(null),[d,v]=l.useState({isEnabled:!1,isPlaying:!1,patterns:[],samples:{},currentPattern:0}),[k,A]=l.useState({isEnabled:!1,isPlaying:!1,tracks:[],loopLength:4,playbackLength:4}),[N,I]=l.useState(!1),[ke,L]=l.useState(null),[Ce,M]=l.useState(0),[z,Pe]=l.useState("file"),[H,W]=l.useState("00:00.0"),[J,Ee]=l.useState(120),[_,C]=l.useState(!1),[T,Q]=l.useState(!1),[B,Y]=l.useState(!1),[X,De]=l.useState(.7),P={C:{I:{name:"C",notes:["C3","E3","G3"],type:"major"},ii:{name:"Dm",notes:["D3","F3","A3"],type:"minor"},iii:{name:"Em",notes:["E3","G3","B3"],type:"minor"},IV:{name:"F",notes:["F3","A3","C4"],type:"major"},V:{name:"G",notes:["G3","B3","D4"],type:"major"},vi:{name:"Am",notes:["A3","C4","E4"],type:"minor"},"viiÂ°":{name:"Bdim",notes:["B3","D4","F4"],type:"diminished"}}},O={piano:{name:"Piano",attack:.1,decay:.2,sustain:.7,release:1.2,waveform:"sine",filterCutoff:2e3,reverb:.3,delay:.1},synth:{name:"Synth",attack:.05,decay:.1,sustain:.8,release:.5,waveform:"sawtooth",filterCutoff:1500,reverb:.2,delay:.2},strings:{name:"Strings",attack:.3,decay:.4,sustain:.9,release:2,waveform:"triangle",filterCutoff:1200,reverb:.5,delay:.1}};l.useEffect(()=>{const s=async()=>{const r=new le(oe,{oscillator:{type:"sine"},envelope:{attack:.1,decay:.2,sustain:.7,release:1.2}}).toDestination(),i=new ce(.3).toDestination(),g=new de("8n",.1).toDestination(),f=new xe(2e3,"lowpass").toDestination(),D=new me(-10,0,10).toDestination(),j=new ue(-30,3).toDestination();r.chain(f,D,j,g,i),U(r)},t=async()=>{const r={kick:new ge({pitchDecay:.05,octaves:10,oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.1,release:.2}}).toDestination(),snare:new $({noise:{type:"white"},envelope:{attack:.01,decay:.2,sustain:.1,release:.2}}).toDestination(),hihat:new $({noise:{type:"white"},envelope:{attack:.01,decay:.1,sustain:.01,release:.1}}).toDestination(),crash:new he({frequency:200,envelope:{attack:.01,decay:.5,sustain:.1,release:.5},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}).toDestination()},i=[{name:"Basic Beat",steps:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0]},{name:"Hip Hop",steps:[1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0]},{name:"House",steps:[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0]}];v(f=>({...f,samples:r,patterns:i})),["kick","snare","hihat","crash"].forEach(f=>{p.scheduleRepeat(D=>{const j=d.patterns[d.currentPattern];if(j&&j.steps&&d.samples[f]){const re=Math.floor(p.position.split(":")[2])%16;j.steps[re]&&d.samples[f].triggerAttackRelease("8n",D)}},"16n")})},a=async()=>{const r=Array(8).fill(null).map((i,g)=>({id:g,name:`Track ${g+1}`,hasContent:!1,isRecording:!1,mute:!1,solo:!1,loopLength:4,playbackLength:4,volume:.7,pan:0,clips:[]}));A(i=>({...i,tracks:r}))};s(),t(),a(),c(!0)},[]);const F=s=>{if(!m)return;const t=P[u][s];t&&(t.notes.forEach(a=>{m.triggerAttack(a)}),S(a=>new Set([...a,s])))},E=s=>{if(!m)return;const t=P[u][s];t&&(t.notes.forEach(a=>{m.triggerRelease(a)}),S(a=>{const r=new Set(a);return r.delete(s),r}))},Z=()=>{m&&(m.releaseAll(),S(new Set))},ee=()=>{_?(p.stop(),C(!1)):(p.start(),C(!0))},se=()=>{p.stop(),p.position=0,C(!1),W("00:00.0")},te=async()=>{try{const t=pe.createMediaStreamDestination();m.connect(t);const a=new MediaRecorder(t.stream,{mimeType:"audio/webm;codecs=opus"}),r=[];a.ondataavailable=i=>{i.data.size>0&&r.push(i.data)},a.onstop=()=>{const i=new Blob(r,{type:"audio/webm"});L(i),I(!1),z==="sequencer"&&ae(i)},a.start(1e3),I(!0),M(0),L(null)}catch(s){console.error("Failed to start recording:",s)}},ae=s=>{const t=k.tracks.find(a=>!a.hasContent);t&&A(a=>{const r=[...a.tracks],i=r.find(g=>g.id===t.id);return i&&(i.hasContent=!0,i.audioBlob=s),{...a,tracks:r}})};return l.useEffect(()=>{const s=a=>{if(a.repeat)return;const r={1:"I",2:"ii",3:"iii",4:"IV",5:"V",6:"vi",7:"viiÂ°"};r[a.key]&&(a.preventDefault(),F(r[a.key]),b(i=>new Set([...i,a.key]))),a.key==="Escape"&&Z()},t=a=>{const r={1:"I",2:"ii",3:"iii",4:"IV",5:"V",6:"vi",7:"viiÂ°"};r[a.key]&&(a.preventDefault(),E(r[a.key]),b(i=>{const g=new Set(i);return g.delete(a.key),g}))};return window.addEventListener("keydown",s),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",t)}},[u,m]),l.useEffect(()=>{let s=null;return N?s=setInterval(()=>{M(t=>t+1)},1e3):clearInterval(s),()=>clearInterval(s)},[N]),y?e.jsxs("div",{className:"h-screen bg-gray-900 text-white flex flex-col",children:[e.jsxs("div",{className:"h-12 bg-gray-800 border-b border-gray-700 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsx("button",{className:"hover:text-blue-400 transition-colors",children:"File"}),e.jsx("button",{className:"hover:text-blue-400 transition-colors",children:"Edit"}),e.jsx("button",{className:"hover:text-blue-400 transition-colors",children:"Settings"}),e.jsx("button",{className:"hover:text-blue-400 transition-colors",children:"Tutorials"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-sm text-green-400",children:"Saved!"}),e.jsx("div",{className:"text-sm font-semibold",children:"Untitled song"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"w-6 h-6 bg-gray-600 rounded"}),e.jsx("button",{className:"px-3 py-1 bg-blue-600 rounded text-sm hover:bg-blue-700",children:"Share"}),e.jsx("button",{className:"w-6 h-6 bg-gray-600 rounded"})]})]}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx("div",{className:"w-64 bg-gray-800 border-r border-gray-700 p-4",children:e.jsxs("div",{className:"space-y-2",children:[k.tracks.map(s=>e.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:s.name}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:`w-6 h-6 rounded text-xs ${s.solo?"bg-yellow-600":"bg-gray-600"}`,children:"S"}),e.jsx("button",{className:`w-6 h-6 rounded text-xs ${s.mute?"bg-red-600":"bg-gray-600"}`,children:"M"}),e.jsx("button",{className:"w-6 h-6 rounded text-xs bg-gray-600",children:"..."})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Vol"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:s.volume,className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Pan"}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.1",value:s.pan,className:"flex-1"})]})]})]},s.id)),e.jsx("button",{className:"w-full py-2 bg-gray-700 rounded text-sm hover:bg-gray-600",children:"+ Add New Track"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"h-8 bg-gray-800 border-b border-gray-700 flex items-center px-4",children:e.jsx("div",{className:"flex gap-8 text-sm",children:Array.from({length:20},(s,t)=>e.jsx("div",{className:"text-gray-400",children:t+1},t))})}),e.jsx("div",{className:"flex-1 bg-gray-900 p-4",children:e.jsx("div",{className:"space-y-2",children:k.tracks.map(s=>e.jsxs("div",{className:"h-16 bg-gray-800 rounded border border-gray-700 flex items-center px-4",children:[e.jsx("div",{className:"w-32 text-sm font-semibold",children:s.name}),e.jsx("div",{className:"flex-1 flex gap-2",children:s.hasContent?e.jsx("div",{className:"h-12 bg-blue-600 rounded flex items-center px-3",children:e.jsx("div",{className:"text-sm",children:"Audio Clip"})}):e.jsx("div",{className:"h-12 bg-gray-700 rounded flex items-center px-3 text-gray-500",children:"Empty"})})]},s.id))})})]}),e.jsx("div",{className:"w-64 bg-gray-800 border-l border-gray-700 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Synth"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Instrument"}),e.jsx("select",{value:n,onChange:s=>o(s.target.value),className:"w-full px-2 py-1 rounded bg-gray-600 text-white text-sm",children:Object.keys(O).map(s=>e.jsx("option",{value:s,children:O[s].name},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Key"}),e.jsxs("select",{value:u,onChange:s=>x(s.target.value),className:"w-full px-2 py-1 rounded bg-gray-600 text-white text-sm",children:[e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"G",children:"G"}),e.jsx("option",{value:"D",children:"D"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"E",children:"E"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"F#",children:"F#"}),e.jsx("option",{value:"C#",children:"C#"}),e.jsx("option",{value:"F",children:"F"}),e.jsx("option",{value:"Bb",children:"Bb"}),e.jsx("option",{value:"Eb",children:"Eb"}),e.jsx("option",{value:"Ab",children:"Ab"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Virtual Keyboard"}),e.jsx("div",{className:"flex gap-1",children:["C","D","E","F","G","A","B"].map(s=>e.jsx("button",{onMouseDown:()=>{m&&(m.triggerAttack(`${s}3`),b(t=>new Set([...t,s])))},onMouseUp:()=>{m&&(m.triggerRelease(`${s}3`),b(t=>{const a=new Set(t);return a.delete(s),a}))},onMouseLeave:()=>{m&&(m.triggerRelease(`${s}3`),b(t=>{const a=new Set(t);return a.delete(s),a}))},className:`w-6 h-12 rounded text-xs font-semibold transition-all duration-200 ${q.has(s)?"bg-blue-600 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:s},s))})]})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Chords"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(P[u]).map(([s,t])=>e.jsx("button",{onMouseDown:()=>F(s),onMouseUp:()=>E(s),onMouseLeave:()=>E(s),className:`p-2 rounded text-sm font-semibold transition-all duration-200 ${h.has(s)?"bg-blue-600 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:t.name},s))})]}),e.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Beatmaker"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>{d.isPlaying?(p.stop(),v(s=>({...s,isPlaying:!1}))):(p.start(),v(s=>({...s,isPlaying:!0})))},className:`px-3 py-1 rounded text-sm ${d.isPlaying?"bg-red-600":"bg-green-600"}`,children:d.isPlaying?"Stop":"Play"})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Pattern"}),e.jsx("select",{value:d.currentPattern,onChange:s=>v(t=>({...t,currentPattern:parseInt(s.target.value)})),className:"w-full px-2 py-1 rounded bg-gray-600 text-white text-sm",children:d.patterns.map((s,t)=>e.jsx("option",{value:t,children:s.name},t))})]}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.keys(d.samples).map(s=>e.jsx("button",{onClick:()=>d.samples[s].triggerAttackRelease("8n"),className:"p-2 bg-gray-600 rounded text-xs hover:bg-gray-500 active:bg-gray-400",children:s},s))}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Steps"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:Array.from({length:16},(s,t)=>{var a;return e.jsx("button",{onClick:()=>{const r=[...d.patterns];r[d.currentPattern].steps[t]=r[d.currentPattern].steps[t]?0:1,v(i=>({...i,patterns:r}))},className:`w-6 h-6 rounded text-xs ${(a=d.patterns[d.currentPattern])!=null&&a.steps[t]?"bg-blue-600":"bg-gray-600"}`,children:t+1},t)})})]})]})]})]})})]}),e.jsxs("div",{className:"h-16 bg-gray-800 border-t border-gray-700 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:X,className:"w-20"})]}),e.jsx("div",{className:"text-sm",children:H}),e.jsx("button",{onClick:te,disabled:N,className:`px-3 py-1 rounded text-sm ${N?"bg-red-600":"bg-gray-600 hover:bg-gray-500"}`,children:"Rec"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:se,className:"w-8 h-8 bg-gray-600 rounded flex items-center justify-center hover:bg-gray-500",children:"â¹"}),e.jsx("button",{onClick:ee,className:"w-8 h-8 bg-gray-600 rounded flex items-center justify-center hover:bg-gray-500",children:_?"â¸":"â–¶"}),e.jsx("button",{className:"w-8 h-8 bg-gray-600 rounded flex items-center justify-center hover:bg-gray-500",children:"â­"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm",children:["Key ",u]}),e.jsxs("div",{className:"text-sm",children:["Tempo ",J]}),e.jsx("button",{onClick:()=>Q(!T),className:`px-3 py-1 rounded text-sm ${T?"bg-blue-600":"bg-gray-600"}`,children:"Loop"}),e.jsx("button",{onClick:()=>Y(!B),className:`px-3 py-1 rounded text-sm ${B?"bg-yellow-600":"bg-gray-600"}`,children:"Metronome"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"w-6 h-6 bg-gray-600 rounded",children:"-"}),e.jsx("button",{className:"w-6 h-6 bg-gray-600 rounded",children:"+"}),e.jsx("button",{className:"text-sm text-blue-400 hover:text-blue-300",children:"Support"})]})]}),e.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-3 bg-gray-700 rounded hover:bg-gray-600 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-lg",children:"ğŸµ"}),e.jsx("div",{className:"text-xs",children:"Browse loops"})]}),e.jsxs("button",{className:"p-3 bg-gray-700 rounded hover:bg-gray-600 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-lg",children:"ğŸ›ï¸"}),e.jsx("div",{className:"text-xs",children:"Patterns Beatmaker"})]}),e.jsxs("button",{className:"p-3 bg-gray-700 rounded hover:bg-gray-600 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-lg",children:"ğŸ¹"}),e.jsx("div",{className:"text-xs",children:"Play the synth"})]}),e.jsxs("button",{className:"p-3 bg-gray-700 rounded hover:bg-gray-600 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-lg",children:"â•"}),e.jsx("div",{className:"text-xs",children:"Add new track"})]}),e.jsxs("button",{className:"p-3 bg-gray-700 rounded hover:bg-gray-600 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-lg",children:"ğŸ“"}),e.jsx("div",{className:"text-xs",children:"Import file"})]}),e.jsxs("button",{className:"p-3 bg-gray-700 rounded hover:bg-gray-600 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-lg",children:"ğŸ‘¥"}),e.jsx("div",{className:"text-xs",children:"Invite a friend"})]})]})})})]}):e.jsx("div",{className:"h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-xl",children:"Loading..."})})};function Se(){return e.jsx(we,{})}R.createRoot(document.getElementById("root")).render(e.jsx(ie.StrictMode,{children:e.jsx(Se,{})}));
